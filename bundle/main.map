{"version":3,"sources":["webpack:///webpack/bootstrap 53f00dfb408178f8f87a","webpack:///./src/main.ts","webpack:///./src/backend.ts","webpack:///external \"https\"","webpack:///./src/odm/db.config.ts","webpack:///external \"fs-extra\"","webpack:///external \"mongoose\"","webpack:///./src/managers/store.manager.ts","webpack:///./src/odm/models/sound-info.model.ts","webpack:///./src/services/transcoding.service.ts","webpack:///./src/managers/fs.manager.ts","webpack:///./src/services/ffmpeg.service.ts","webpack:///external \"child_process\"","webpack:///external \"path\"","webpack:///external \"crypto\"","webpack:///./src/endpoints/public.endpoint.ts","webpack:///./src/auth/login.manager.ts","webpack:///./src/odm/models/user.model.ts","webpack:///./src/_local.credentials.ts","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\"","webpack:///./src/endpoints/session.endpoint.ts","webpack:///external \"socket.io\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACtCA,wCAAkC;AAElC;KACC,iBAAS,CAAC,SAAS,EAAE,CAAC;AACvB,EAAC;AAED,KAAI,EAAE,CAAC;;;;;;;;;ACNP,oCAA+B;AAC/B,uCAA6C;AAC7C,8CAAsD;AACtD,iDAA4D;AAE5D,+CAAkD;AAClD,kDAA8D;AAC9D,iCAA+B;AAE/B;KAiBC;SAfQ,SAAI,GAAW,IAAI,CAAC;SACpB,WAAM,GAAoB,mBAAO,CAAC,EAAW,CAAC,CAAC,IAAI,EAAE;aAC5D,MAAM,EAAE,IAAI;aACZ,iBAAiB,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI;UACrC,CAAC,CAAC;SACK,YAAO,GAAS,EAAE,CAAC;SAW1B,IAAI,CAAC,IAAI,EAAE,CAAC;SACZ,IAAI,CAAC,OAAO,EAAE,CAAC;SACf,QAAQ,EAAE,CAAC;KACZ,CAAC;KARa,yBAAS,GAAvB;SACC,MAAM,CAAC,IAAI,eAAe,EAAE,CAAC;KAC9B,CAAC;KAAA,CAAC;KAMD,CAAC;KAEM,iCAAO,GAAf;SAAA,iBAWC;SAVA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,MAAc;aACxC,KAAI,CAAC,UAAU,GAAG,iCAAe,CAAC,MAAM,CAAC,CAAC;aAC1C,KAAI,CAAC,UAAU,GAAG,mCAAgB,CAAC,MAAM,CAAC,CAAC;aAC3C,KAAI,CAAC,OAAO,GAAO,KAAI,CAAC,OAAO,SAAE,MAAM,CAAC,EAAE,EAAC,CAAC;aAC5C,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,UAAC,GAAQ;iBACnC,IAAM,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAC,KAAK,IAAK,YAAK,KAAK,MAAM,CAAC,EAAE,EAAnB,CAAmB,CAAC,CAAC;iBACrE,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;iBAC3B,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;aAC9B,CAAC,CAAC,CAAC;SACJ,CAAC,CAAC,CAAC;KACJ,CAAC;KAEO,8BAAI,GAAZ;SACC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;aAChC,IAAI,EAAE,EAAE,CAAC,YAAY,CAAC,qDAAqD,CAAC;aAC5E,GAAG,EAAE,EAAE,CAAC,YAAY,CAAC,6CAA6C,CAAC;UACnE,CAAC,CAAC;SACH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;SAC3C,IAAI,CAAC,YAAY,GAAG,4BAAY,EAAE,CAAC;SACnC,IAAI,CAAC,YAAY,GAAG,IAAI,4BAAY,EAAE,CAAC;KACxC,CAAC;KACF,sBAAC;AAAD,EAAC;AA7CY,2CAAe;AA+C5B,mBAAe,eAAe,CAAC;;;;;;;ACxD/B,mC;;;;;;;ACAA,iCAA+B;AAE/B,kBAAS;KACR,IAAI,QAAQ,GAAG,mBAAO,CAAC,CAAU,CAAC,CAAC;KACnC,IAAI,EAAE,GAAG,QAAQ,CAAC,UAAU,CAAC;KAC7B,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACpD,QAAQ,CAAC,OAAO,CAAC,4CAA4C,EAAE;SAC9D,cAAc,EAAE,IAAI;SACpB,GAAG,EAAE,IAAI;SACT,WAAW,EAAE,KAAK;SAClB,MAAM,EAAE,EAAE,CAAC,YAAY,CAAC,SAAS,GAAI,uCAAuC,CAAC;SAC7E,OAAO,EAAE,EAAE,CAAC,YAAY,CAAC,SAAS,GAAG,uCAAuC,CAAC;MAE7E,CAAC,CAAC;KACH,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC,CAAC;KAChE,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;SACf,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;KAC9B,CAAC,CAAC,CAAC;AACJ,EAAC,CAAC;;;;;;;;AClBF,sC;;;;;;ACAA,sC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,uCAAsC;AAEtC,iDAAqF;AACrF,oDAA0D;AAa1D,KAAM,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,qCAAkB,CAAC,CAAC;AAElE;KAAA,iBAkCC;KAhCA,MAAM,CAAC;SACN,eAAe,EAAE,UAAO,KAA4B;;iBACnD,sBAAO,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAC;;cAC7B;SAED,mBAAmB,EAAE;;;6BACb,qBAAM,SAAS,CAAC,IAAI,EAAE;6BAA7B,sBAAO,SAAsB,EAAC;;;cAC9B;SAED,gBAAgB,EAAE,UAAO,QAAiC,EAAE,MAAM;;;;;yBAC1D,KAAK,GAAiB,QAAQ,MAAzB,EAAE,WAAW,GAAI,QAAQ,YAAZ,CAAa;yBACnB,qBAAM,SAAS,CAAC,MAAM,CAAC,EAAC,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAC,CAAC;;yBAA7E,UAAU,GAAG,SAAgE;yBACnF,EAAE,CAAC,CAAC,UAAU,CAAC,EAAC;6BACf,MAAM,gBAAC,+BAAS,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,EAAE,QAAQ,CAAC,SAAS,CAAC,EAAC;yBAC9D,CAAC;yBAAC,IAAI,CAAC,CAAC;6BACP,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,UAAU,CAAC,CAAC;6BACnD,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAC,EAAC;yBACzC,CAAC;;;;cACD;SAED,iBAAiB,EAAE,UAAO,EAAU,EAAE,IAA0B;;;;;yBAC/D,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;yBACV,qBAAM,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC;kCAChD,KAAK,CAAC,UAAC,GAAQ,IAAK,cAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,EAAzB,CAAyB,CAAC;;yBAD1C,QAAQ,GAAQ,SAC0B;yBAChD,EAAE,EAAC,QAAQ,CAAC,EAAC;6BACZ,MAAM,gBAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;sCAC1B,KAAK,CAAC,UAAC,GAAQ,IAAK,cAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,EAA1B,CAA0B,CAAC,EAAC;yBACnD,CAAC;yBAAC,IAAI,CAAC,CAAC;6BACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,6BAA6B,EAAC,EAAC;yBAC5D,CAAC;;;;cACD;MACD,CAAC;AACH,EAAC;AAlCD,qCAkCC;;;;;;;;;ACpDD,uCAAqC;AAErC,KAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAWhB,2BAAkB,GAAG,IAAI,MAAM,CAAC;KAC5C,EAAE,EAAE,MAAM;KACV,QAAQ,EAAE,MAAM;KAChB,QAAQ,EAAE,MAAM;KAChB,MAAM,EAAE,MAAM;KACd,KAAK,EAAE,MAAM;KACb,WAAW,EAAE,MAAM;EACnB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBH,4CAAiD;AACjD,gDAAqE;AACrE,8CAAqE;AACrE,iCAA+B;AAC/B,oCAA6B;AAE7B,sCAAkC;AAElC,oBAAgC,MAAc,EAAE,OAAe,EAAE,IAAS;;;;aACzE,sBAAO,IAAI,OAAO,CAAC,UAAO,OAAO,EAAE,MAAM;;;;;iCACpC,MAAM,GAAG,EAAE,CAAC;iCACV,KAAK,GAAiB,4BAAY,EAAE,CAAC;iCAE3C,GAAG,CAAC,OAA+B,EAAnB,SAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAnB,cAAmB,EAAnB,IAAmB;qCAA1B,GAAG;qCACX,MAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;kCAC3B;iCAEK,IAAI,GAAc,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,OAAS,CAAC;iCAC9D,IAAI,GAAW,cAAc,CAAC,MAAM,CAAC,CAAC;iCACtC,OAAO,GAAM,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,OAAS,CAAC;iCAE5C,qBAClB,sBAAS,CACL,IAAI,YAAS,EACb,OAAO,SAAI,IAAM,EACpB,IAAI,CACJ;;iCALI,UAAU,GAAG,SAKjB;sCAEE,UAAU,CAAC,EAAE,EAAb,wBAAa;iCACE,qBACjB,kCAAiB,CAChB,OAAO,EACJ,UAAU,CAAC,IAAI,SAAI,UAAU,CAAC,QAAU,EACxC,OAAO,WAAQ,CAClB;;iCALI,SAAS,GAAG,SAKhB;iCACiB,qBAClB,iCAAgB,CACf,OAAO,EACJ,UAAU,CAAC,IAAI,SAAI,UAAU,CAAC,QAAU,EACxC,OAAO,UAAO,CACjB;;iCALI,UAAU,GAAG,SAKjB;iCACF,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,UAAU,CAAC,CAAC;iCAC3B,qBACvB,EAAE,CAAC,QAAQ,CACV,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,EACxB,gBAAgB,EAChB,OAAO,EACP,KAAK,EACF,OAAO,SAAM,CAChB,CAAC;;iCAPE,OAAO,GAAW,SAOpB;iCAEE,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;sCAC1C,MAAM,CAAC,IAAI,CAAC,CAAC;iCAET,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;sCACzC,MAAM,CAAC,OAAO,CAAC,CAAC;iCACI,qBACrB,KAAK,CAAC,iBAAiB,CACtB,OAAO,EACP;yCACC,UAAU,EAAE,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;yCAClC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;sCAC9B,CAAC;;iCANE,GAAG,GAAa,SAMlB;iCACJ,EAAE,EAAC,OAAO,IAAI,QAAQ,CAAC,EAAC;qCACvB,OAAO,CAAC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAC,IAAI,EAAE,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,GAAG,EAAC,EAAC,CAAC,CAAC;iCAClE,CAAC;iCAAC,IAAI,CAAC,CAAC;qCACP,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,mBAAmB,EAAC,CAAC,CAAC;iCAEnD,CAAC;;;iCAED,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,UAAiB,EAAC,CAAC,CAAC;;;;;sBAEjD,CAAC,EAAC;;;EACH;AAjED,+BAiEC;AAED,yBAAwB,MAAc;KACrC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B,KAAI,QAAQ;aACX,MAAM,CAAC,KAAK,CAAC;SACd,KAAI,QAAQ;aACX,MAAM,CAAC,KAAK,CAAC;SACd,KAAI,QAAQ;aACX,MAAM,CAAC,KAAK,CAAC;SACd,KAAI,QAAQ;aACX,MAAM,CAAC,MAAM,CAAC;SACf,KAAI,QAAQ;aACX,MAAM,CAAC,KAAK,CAAC;SACd;aACC,MAAM,CAAC,SAAS,CAAC;KACnB,CAAC;AACF,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FD,iCAA+B;AAS/B,oBAAgC,IAAY,EAAE,QAAgB,EAAE,IAAS;;;;;yBACjE,qBAAM,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC;0BAC7B,IAAI,CAAE;;;yCACC,qBAAM,EAAE,CAAC,SAAS,CAAI,IAAI,SAAI,QAAU,EAAE,IAAI,CAAC;0CACpD,IAAI,CAAC,UAAC,MAAW;yCACjB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;6CACZ,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,kBAAkB,EAAC,CAAC;yCACjD,CAAC;yCAAC,IAAI,CAAC,CAAC;6CACP,MAAM,CAAC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAG,IAAM,EAAE,QAAQ,EAAC,KAAG,QAAU,EAAC,CAAC;yCAC5D,CAAC;qCACF,CAAC,CACD;yCARD,sBAAO,SAQN,EAAC;;;0BACF,CAAC;0BACD,KAAK,CAAC,aAAG;yBACT,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,oBAAoB,GAAG,GAAG,EAAC,CAAC;qBAC1D,CAAC,CAAC;yBAdF,sBAAO,SAcL,EAAC;;;;EACH;AAhBD,+BAgBC;AAED,mBAA+B,QAAgB;;;;yBACvC,qBAAM,EAAE,CAAC,QAAQ,CACpB,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,QAAQ,aAAQ,QAAQ,SAAM,CACnE;yBAFD,sBAAO,SAEN,EAAC;;;;EACF;AAJD,6BAIC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BD,iCAA+B;AAExB,0CAAK,CAA6B;AAEzC,4BAAwC,QAAgB,EAAE,QAAgB,EAAE,UAAkB;;;;yBACtF,qBAAM,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC;0BACnC,IAAI,CAAC;yBACL,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,KAAG,QAAU,EAAE,MAAM,EAAE,MAAM,EAAE,KAAG,UAAU,GAAG,QAAQ,UAAO,EAAE,IAAI,CAAC,CAAC,CAAC;yBAC3G,4CAA4C;yBAC5C,yCAAyC;yBACzC,MAAM;yBACN,4CAA4C;yBAC5C,iCAAiC;yBACjC,MAAM;yBAEN,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAY;6BAC9B,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,IAAI,CAAC,CAAC;yBACtD,CAAC,CAAC,CAAC;yBACH,MAAM,CAAC,IAAI,CAAC;qBACb,CAAC,CAAC;0BACD,KAAK,CAAC,aAAG;yBACT,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;yBACnD,MAAM,CAAC,KAAK,CAAC;qBAEd,CAAC,CAAC;yBAnBH,sBAAO,SAmBJ,EAAC;;;;EACJ;AArBD,+CAqBC;AAED,2BAAuC,QAAgB,EAAE,QAAgB,EAAE,UAAkB;;;aAC5F,sBAAO,IAAI,OAAO,CAAU,CAAC,UAAC,OAAO,EAAE,MAAM;qBAC5C,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC;0BACtB,IAAI,CAAC;yBACL,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,KAAG,QAAU,EAAE,UAAU,EAAE,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,KAAG,UAAU,GAAG,QAAQ,SAAM,EAAE,IAAI,CAAC,CAAC,CAAC;yBACpI,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAY;6BAC9B,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC,CAAC;6BACpD,EAAE,EAAC,CAAC,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iCACzB,OAAO,CAAC,IAAI,CAAC;6BACd,CAAC;6BAAC,IAAI,CAAC,CAAC;iCACP,MAAM,CAAC,KAAK,CAAC,CAAC;6BACf,CAAC;yBACF,CAAC,CAAC,CAAC;qBACJ,CAAC,CAAC;0BACD,KAAK,CAAC,aAAG;yBACT,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;yBACnD,MAAM,CAAC,KAAK,CAAC,CAAC;qBACf,CAAC,CAAC,CAAC;iBACJ,CAAC,CAAC,CAAC;;;EACJ;AAnBD,6CAmBC;;;;;;;AC9CD,2C;;;;;;ACAA,kC;;;;;;ACAA,oC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,8CAAqE;AACrE,+CAAmD;AACnD,4CAAgD;AAEhD,KAAI,MAAM,GAAiB,4BAAY,EAAE,CAAC;AAC1C,KAAI,MAAM,GAAkB,IAAI,4BAAY,EAAE,CAAC;AAE/C,0BAAgC,MAAW;KAA3C,iBA6BC;KA3BG,MAAM,CAAC,EAAE,CAAC,yBAAyB,EAAE;KAErC,CAAC,CAAC,CAAC;KAEN,MAAM,CAAC,EAAE,CACR,wBAAwB,EACxB,UAAO,SAAiB,EAAE,QAAa;;;;;qBACtC,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;qBACjC,qBAAM,MAAM,CAAC,mBAAmB,EAAE;;qBAAzC,IAAI,GAAG,SAAkC;qBAC/C,QAAQ,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAC,CAAC,CAAC;;;;UACjC,CACD,CAAC;KAEF,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAO,OAAY,EAAE,QAAiC;;;;yBAChD,qBAAM,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,SAAS,CAAC;;qBAAjF,UAAU,GAAQ,SAA+D;qBACvF,QAAQ,CAAC,UAAU,CAAC,CAAC;;;;UACrB,CAAC,CAAC;KAGH,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,UAAO,OAA6B,EAAE,QAAiC;;;;yBACjF,qBAAM,MAAM,CAAC,eAAe,CAAC,EAAC,GAAG,EAAE,OAAO,CAAC,QAAQ,EAAC,CAAC;0BACpE,KAAK,CAAC,aAAG,IAAK,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,GAAG,CAAC,GAAC,CAAC;;qBADvD,QAAQ,GAAG,SAC4C;qBAClC,qBAAM,qBAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC;8BACzD,KAAK,CAAC,aAAG,IAAK,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,GAAC,CAAC;;qBAD/C,IAAI,GAAiB,SAC0B;qBACrD,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,CAAC;qBAClD,QAAQ,CAAC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;;;;UACjC,CAAC;AACH,EAAC;AA7BD,2CA6BC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCD,4CAAmD;AACnD,oDAA6C;AAC7C,uCAAsC;AAKtC,KAAM,MAAM,GAAG,mBAAO,CAAC,EAAU,CAAC,CAAC;AACnC,KAAM,YAAY,GAAG,mBAAO,CAAC,EAAc,CAAC,CAAC;AAE7C;KAAA;SAES,SAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,sBAAS,CAAC,CAAC;KAwDlD,CAAC;KAtDO,iCAAU,GAAjB;SACC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;aAChB,QAAQ,EAAE,cAAc;aACxB,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,sBAAsB,CAAC;UACnD,CAAC,CAAC,IAAI,CAAC,aAAG,IAAI,UAAG,EAAH,CAAG,CAAC,CAAC;KACrB,CAAC;KAEO,mCAAY,GAApB,UAAqB,QAAgB;SACpC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;KACrC,CAAC;KAEa,uCAAgB,GAA9B,UAA+B,QAAgB,EAAE,QAAgB;;;;;6BAC9C,qBAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAC,CAAC;;yBAAzD,IAAI,GAAQ,SAA6C;yBAC/D,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;6BACV,MAAM,gBAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAC;yBACpD,CAAC;yBACD,sBAAO,KAAK,EAAC;;;;MACb;KAEO,yCAAkB,GAA1B,UAA2B,IAAwD;SAClF,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC;aACxB,SAAS,EAAE,IAAI,CAAC,SAAS;aACzB,IAAI,EAAE,IAAI,CAAC,QAAQ;aACnB,GAAG,EAAE,IAAI,CAAC,GAAG;UACb,EAAE,2BAAM,CAAC,CAAC;KACZ,CAAC;KAEY,iCAAU,GAAvB,UAAwB,WAAmD,EAAE,SAAiB;;;;;6BACtF,qBAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,QAAQ,EAAE,WAAW,CAAC,QAAQ,CAAC;8BAC5E,IAAI,CAAC,UAAO,OAAO;;;;;8CACf,OAAO,EAAP,wBAAO;yCACQ,qBAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,QAAQ,EAAE,WAAW,CAAC,QAAQ,EAAC,CAAC;;yCAArE,IAAI,GAAQ,SAAyD;yCAC3E,EAAE,EAAC,IAAI,CAAC,EAAC;6CACR,MAAM,gBAAC,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,kBAAkB,CAAC,EAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC;yCAC5H,CAAC;yCAAC,IAAI,CAAC,CAAC;6CACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,EAAC;yCAC/C,CAAC;;6CAED,sBAAO,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,4BAA4B,EAAC,EAAC;;;;8BAE5D,CAAC;6BAZF,sBAAO,SAYL,EAAC;;;;MACH;KAEY,gCAAS,GAAtB,UAAuB,GAAW;;;;;;yBAC3B,SAAS,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;6BAC7C,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE,2BAAM,EAAE,UAAC,KAAU,EAAE,OAAY;iCACzD,EAAE,EAAC,KAAK,CAAC,EAAC;qCACT,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,EAAC,CAAC,CAAC;iCACzD,CAAC;iCACD,OAAO,CAAE,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;6BACxC,CAAC,CAAC,CAAC;yBACJ,CAAC,CAAC,CAAC;yBACI,qBAAM,SAAS;6BAAtB,sBAAO,SAAkC,EAAC;;;;MAC1C;KACF,mBAAC;AAAD,EAAC;AA1DY,qCAAY;;;;;;;;;ACVzB,KAAI,QAAQ,GAAG,mBAAO,CAAC,CAAU,CAAC,CAAC;AACnC,KAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAEhB,kBAAS,GAAG,IAAI,MAAM,CAAC;KACnC,QAAQ,EAAE;SACT,IAAI,EAAE,MAAM;SACZ,MAAM,EAAE,IAAI;SACZ,KAAK,EAAE,IAAI;MACX;KACD,QAAQ,EAAE,MAAM;KAChB,KAAK,EAAE,MAAM;EACb,CAAC,CAAC;;;;;;;;;ACXU,eAAM,GAAG,2FAA2F;AAEpG,gBAAO,GAAG;KACtB,MAAM,EAAE,2BAA2B;KACnC,MAAM,EAAE,oDAAoD;EAC5D,CAAC;;;;;;;ACLF,sC;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,+CAAmD;AACnD,8CAAuD;AAEvD,oDAA0D;AAE1D,KAAM,MAAM,GAAG,IAAI,4BAAY,EAAE,CAAC;AAClC,KAAM,MAAM,GAAG,4BAAY,EAAE,CAAC;AAE9B,2BAAiC,MAAW;KAA5C,iBAuEC;KArEA,IAAM,WAAW,GAAQ,UAAC,IAAY,EAAE,GAAW,EAAE,MAGpD,EAAE,YAAiB;SACnB,MAAM,CAAC,EAAE,CAAC,IAAI,EAAE;;;iBACR,SAAS,GAAS,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,UAA9B,CAA+B;iBAC/C,EAAE,CAAC,CAAC,SAAS,CAAC,EAAC;qBACR,QAAQ,GAAG,YAAY,EAAE,CAAC;qBAChC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAC;yBAChB,MAAM,CAAC,IAAI,CAAI,IAAI,iBAAY,SAAW,EAAE,QAAQ,CAAC,CAAC;qBACvD,CAAC;qBAAC,IAAI,CAAC,CAAC;yBACP,MAAM,CAAC,IAAI,CAAI,IAAI,iBAAY,SAAW,EAAE,QAAQ,CAAC,CAAC;qBACvD,CAAC;iBACF,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACP,MAAM,CAAC,IAAI,CAAI,IAAI,iBAAY,SAAW,EAAE;yBAC3C,EAAE,EAAE,KAAK;yBACT,OAAO,EAAE,gBAAc,IAAI,MAAG;sBAC9B,CAAC,CAAC;iBACJ,CAAC;;;cACD,CAAC,CAAC;KACJ,CAAC,CAAC;KAEF,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,UAAO,GAAQ,EAAE,SAAiB;;aAC3D,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBAC3B,MAAM,CAAC,IAAI,CAAC,0BAAwB,SAAW,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC,CAAC,CAAC;aAC9D,CAAC;aAAC,IAAI,CAAC,CAAC;iBACP,MAAM,CAAC,IAAI,CAAC,0BAAwB,SAAW,EAAE;qBAChD,EAAE,EAAE,KAAK;qBACT,OAAO,EAAE,8BAA8B;kBACvC,CAAC,CAAC;aACJ,CAAC;;;UACD,CAAC,CAAC;KAEH,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,UAAO,OAAsE,EAAE,QAAiC;;;;yBACtH,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC;;qBAAtD,WAAW,GAAQ,SAAmC;0BACxD,WAAW,CAAC,EAAE,EAAd,wBAAc;qBACE,qBAAM,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC;;qBAArF,UAAU,GAAG,SAAwE;qBAC3F,QAAQ,CAAC,UAAU,CAAC,CAAC;;;qBAErB,QAAQ,CAAC;yBACR,EAAE,EAAE,KAAK;yBACT,OAAO,EAAE,yBAAyB;sBAClC,CAAC,CAAC;;;;;UAEJ,CAAC,CAAC;KAEH,MAAM,CAAC,EAAE,CAAC,8BAA8B,EAAE,UAAO,OAAY,EAAE,QAAiC;;;;yBACtE,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC;;qBAAtD,WAAW,GAAQ,SAAmC;0BACxD,WAAW,CAAC,EAAE,EAAd,wBAAc;qBACE,qBAAM,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC;;qBAA3E,UAAU,GAAG,SAA8D;qBACjF,QAAQ,CAAC,UAAU,CAAC,CAAC;;;qBAErB,QAAQ,CAAC;yBACR,EAAE,EAAE,KAAK;yBACT,OAAO,EAAE,yBAAyB;sBAClC,CAAC,CAAC;;;;;UAEJ,CAAC,CAAC;KAEH,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,UAAO,OAAY,EAAE,GAAqC;;;;yBACvE,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC;;qBAAjD,WAAW,GAAG,SAAmC;0BACnD,WAAW,CAAC,EAAE,EAAd,wBAAc;qBACA,qBAAM,+BAAS,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC;8BACtF,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,EAAlD,CAAkD,CAAC;;qBAD5D,QAAQ,GAAG,SACiD;qBAClE,GAAG,CAAC,QAAQ,CAAC,CAAC;;;qBAEd,GAAG,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qCAAqC,EAAC,CAAC,CAAC;;;;;UAElE,CAAC,CAAC;AACJ,EAAC;AAvED,6CAuEC;;;;;;;AC/ED,uC","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 53f00dfb408178f8f87a","import BootStrap from './backend';\n\nfunction boot() {\n\tBootStrap.bootstrap();\n}\n\nboot();\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import * as https from 'https';\nimport dbConfig = require('./odm/db.config');\nimport {storeManager} from './managers/store.manager';\nimport {publicEndpoints} from './endpoints/public.endpoint';\nimport Socket = SocketIO.Socket;\nimport {LoginManager} from './auth/login.manager';\nimport {sessionEndpoints} from './endpoints/session.endpoint';\nimport * as fs from 'fs-extra';\n\nexport class BackendServices {\n\tprivate server: https.Server;\n\tprivate port: number = 2820;\n\tprivate socket: SocketIO.Server = require('socket.io')(2820, {\n\t\tsecure: true,\n\t\tmaxHttpBufferSize: 1024 * 1024 * 1024,\n\t});\n\tprivate clients: {}[] = [];\n\tprivate storeManager: any;\n\tprivate loginManager: LoginManager;\n\tprivate generalAPI: any;\n\tprivate sessionAPI: any;\n\n\tpublic static bootstrap(): BackendServices {\n\t\treturn new BackendServices();\n\t};\n\n\tconstructor() {\n\t\tthis.init();\n\t\tthis.setupWS();\n\t\tdbConfig();\n\t};\n\n\tprivate setupWS(): void {\n\t\tthis.socket.on('connect', (socket: Socket) => {\n\t\t\tthis.generalAPI = publicEndpoints(socket);\n\t\t\tthis.sessionAPI = sessionEndpoints(socket);\n\t\t\tthis.clients = [...this.clients, socket.id];\n\t\t\tsocket.on('disconnecting', (res: any) => {\n\t\t\t\tconst index = this.clients.findIndex((value) => value === socket.id);\n\t\t\t\tconsole.log(`Client DC'd`);\n\t\t\t\tthis.clients.splice(index, 1)\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate init(): void {\n\t\tthis.server = https.createServer({\n\t\t\tcert: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/certificate.pem'),\n\t\t\tkey: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/key.pem')\n\t\t});\n\t\tthis.server.listen(this.port, 'localhost');\n\t\tthis.storeManager = storeManager();\n\t\tthis.loginManager = new LoginManager();\n\t}\n}\n\nexport default BackendServices;\n\n\n\n// WEBPACK FOOTER //\n// ./src/backend.ts","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 3\n// module chunks = 0","import * as fs from \"fs-extra\";\n\nexport = () => {\n\tlet mongoose = require('mongoose');\n\tlet db = mongoose.connection;\n\tconsole.log('pwd', __dirname, process.env.PATH.PWD);\n\tmongoose.connect('mongodb://localhost:27017/dcomp_store_root', {\n\t\tuseMongoClient: true,\n\t\tssl: true,\n\t\tsslValidate: false,\n\t\tsslKey: fs.readFileSync(__dirname +  '/../../_local/secops/mongodb-cert.key'),\n\t\tsslCert: fs.readFileSync(__dirname + '/../../_local/secops/mongodb-cert.crt')\n\n\t});\n\tdb.on('error', console.error.bind(console, 'connection error'));\n\tdb.once('open', () => {\n\t\tconsole.log('Db Connected!');\n\t});\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/db.config.ts","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 6\n// module chunks = 0","import mongoose = require('mongoose');\nimport {Document} from 'mongoose';\nimport {SoundDetailsModel, SoundDetailsSchema} from '../odm/models/sound-info.model';\nimport {saveSound} from '../services/transcoding.service';\n\nexport interface StoreManager {\n\n\tgetSoundDetails(condition: {[key: string]: any}): Promise<Document[]>;\n\n\tgetAllSoundsDetails(): Promise<Document[] | undefined>;\n\n\tregisterNewSound(formData: SoundDetailsModel, userID: string): Promise<Document>;\n\n\tupdateSoundByProp(id: string, prop: {[prop:string]: any}): Promise<any>;\n}\n\nconst SoundInfo = mongoose.model('SoundInfo', SoundDetailsSchema);\n\nexport function storeManager(): StoreManager {\n\n\treturn {\n\t\tgetSoundDetails: async (props: {[prop: string]: any}): Promise<Document[]> => {\n\t\t\treturn SoundInfo.find(props);\n\t\t},\n\n\t\tgetAllSoundsDetails: async () => {\n\t\t\treturn await SoundInfo.find();\n\t\t},\n\n\t\tregisterNewSound: async (formData: SoundDetailsModel | any, userID): Promise<any> => {\n\t\t\tconst {title, description} = formData;\n\t\t\tconst registered = await SoundInfo.create({title: title, description: description});\n\t\t\tif (registered){\n\t\t\t\treturn saveSound(userID, registered._id, formData.soundFile);\n\t\t\t} else {\n\t\t\t\tconsole.log('error registering sound', registered);\n\t\t\t\treturn {ok: false, message: registered};\n\t\t\t}\n\t\t},\n\n\t\tupdateSoundByProp: async (id: string, prop: {[prop:string]: any}): Promise<any> => {\n\t\t\tconsole.log('update', id, prop);\n\t\t\tconst soundDoc: any = await SoundInfo.findById(id)\n\t\t\t\t.catch((err: any) => console.log('sound', err));\n\t\t\tif(soundDoc){\n\t\t\t\treturn soundDoc.update(prop)\n\t\t\t\t\t.catch((err: any) => console.log('update' ,err));\n\t\t\t} else {\n\t\t\t\treturn {ok: false, message: 'Error: No Matching Sound ID'};\n\t\t\t}\n\t\t}\n\t};\n}\n\n\n// WEBPACK FOOTER //\n// ./src/managers/store.manager.ts","import * as mongoose from 'mongoose';\n\nvar Schema = mongoose.Schema;\n\nexport interface SoundDetailsModel {\n\tid?: string;\n\tsoundURL: string;\n\tvideoURL?: string;\n\timgURL?: string;\n\ttitle: string;\n\tdescription: string;\n}\n\nexport const SoundDetailsSchema = new Schema({\n\tid: String,\n\tsoundURL: String,\n\tvideoURL: String,\n\timgURL: String,\n\ttitle: String,\n\tdescription: String\n});\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/sound-info.model.ts","import {saveToDir} from '../managers/fs.manager';\nimport {encodeAudioToFLAC, encodeAudioToMP3} from './ffmpeg.service';\nimport {storeManager, StoreManager} from '../managers/store.manager';\nimport * as fs from 'fs-extra';\nimport * as Path from 'path';\nimport {RSocketResponse} from '../models/response-socket.model';\nimport crypto = require('crypto');\n\nexport async function saveSound(userID: string, soundID: string, file: any): Promise<RSocketResponse | {} > {\n\treturn new Promise(async (resolve, reject) => {\n\t\tlet header = '';\n\t\tconst store: StoreManager = storeManager();\n\n\t\tfor (let bit of file.subarray(0, 4)) {\n\t\t\theader += bit.toString(16);\n\t\t}\n\n\t\tconst path: string = `${process.env.PWD}/dcm-file-store/${soundID}`;\n\t\tconst MIME: string = HEADER_TO_MIME(header);\n\t\tconst outPath = `${process.env.PWD}/dcm-file-store/${soundID}`;\n\n\t\tconst saveResult = await\n\t\t\tsaveToDir(\n\t\t\t\t`${path}/source`,\n\t\t\t\t`${soundID}.${MIME}`,\n\t\t\t\tfile\n\t\t\t);\n\n\t\tif (saveResult.ok) {\n\t\t\tconst flacSaved = await\n\t\t\t\tencodeAudioToFLAC(\n\t\t\t\t\tsoundID,\n\t\t\t\t\t`${saveResult.path}/${saveResult.fileName}`,\n\t\t\t\t\t`${outPath}/flac/`\n\t\t\t\t);\n\t\t\tconst mp3Encoded = await\n\t\t\t\tencodeAudioToMP3(\n\t\t\t\t\tsoundID,\n\t\t\t\t\t`${saveResult.path}/${saveResult.fileName}`,\n\t\t\t\t\t`${outPath}/mp3/`\n\t\t\t\t);\n\t\t\tconsole.log('hit saveSound after mp3', mp3Encoded);\n\t\t\tconst mp3File: Buffer = await\n\t\t\t\tfs.readFile(\n\t\t\t\t\tPath.join(process.env.PWD,\n\t\t\t\t\t\t'dcm-file-store',\n\t\t\t\t\t\tsoundID,\n\t\t\t\t\t\t`mp3`,\n\t\t\t\t\t\t`${soundID}.mp3`\n\t\t\t\t\t));\n\n\t\t\tconst fileHash = crypto.createHash('sha256')\n\t\t\t\t.update(file);\n\n\t\t\tconst mp3Hash = crypto.createHash('sha256')\n\t\t\t\t.update(mp3File);\n\t\t\tconst doc: Document = await\n\t\t\t\tstore.updateSoundByProp(\n\t\t\t\t\tsoundID,\n\t\t\t\t\t{\n\t\t\t\t\t\tsourceHash: fileHash.digest('hex'),\n\t\t\t\t\t\tmp3Hash: mp3Hash.digest('hex')\n\t\t\t\t\t});\n\t\t\tif(mp3Hash && fileHash){\n\t\t\t\tresolve({ok: true, body: {path: saveResult.path, details: doc}});\n\t\t\t} else {\n\t\t\t\treject({ok: false, message: 'Error transcoding'});\n\n\t\t\t}\n\t\t} else {\n\t\t\treject({ok: false, message: saveResult as any});\n\t\t}\n\t});\n}\n\nfunction HEADER_TO_MIME(header: string): string {\n\tswitch (header.slice(0, 6)) {\n\t\tcase'464f52':\n\t\t\treturn 'aif';\n\t\tcase'494433':\n\t\t\treturn 'mp3';\n\t\tcase'524946':\n\t\t\treturn 'wav';\n\t\tcase'664C61':\n\t\t\treturn 'flac';\n\t\tcase'000001':\n\t\t\treturn 'mp4';\n\t\tdefault:\n\t\t\treturn 'unknown';\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/transcoding.service.ts","import * as fs from 'fs-extra';\n\nexport interface SaveDIRResponse {\n\tok?: boolean;\n\tpath?: string;\n\tfileName?: string;\n\tmessage?: string;\n}\n\nexport async function saveToDir(path: string, fileName: string, file: any): Promise<SaveDIRResponse> {\n\treturn await fs.ensureDir(path)\n\t\t.then( async () => {\n\t\t\treturn await fs.writeFile(`${path}/${fileName}`, file)\n\t\t\t\t.then((reason: any ) => {\n\t\t\t\t\tif (reason) {\n\t\t\t\t\t\treturn {ok: false, message: 'file write error'};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {ok: true, path: `${path}`, fileName:`${fileName}`};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t\t.catch(err => {\n\t\t\treturn {ok: false, message: 'ensure DIR error: ' + err};\n\t});\n}\n\nexport async function openFile(sound_id: string): Promise<Buffer> {\n\treturn await fs.readFile(\n\t\t`${process.env.PWD}/dcm-file-store/${sound_id}/mp3/${sound_id}.mp3`\n\t);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/managers/fs.manager.ts","import * as fs from 'fs-extra';\n\nconst {spawn} = require('child_process');\n\nexport async function encodeAudioToFLAC(fileName: string, filePath: string, outputPath: string): Promise<boolean> {\n\treturn await fs.ensureDir(outputPath)\n\t\t.then(() => {\n\t\t\tlet ffmpeg = spawn(`ffmpeg`, [`-i`, `${filePath}`, `-c:a`, `flac`, `${outputPath}${fileName}.flac`, `-y`]);\n\t\t\t// ffmpeg.stdout.on('data', (data: any) => {\n\t\t\t// \tconsole.log('flac', data.toString());\n\t\t\t// });\n\t\t\t// ffmpeg.stderr.on('data', (data: any) => {\n\t\t\t// \tconsole.log(data.toString());\n\t\t\t// });\n\n\t\t\tffmpeg.on('exit', (code: string) => {\n\t\t\t\tconsole.log('ffmpeg::flac exited with code: ', code);\n\t\t\t});\n\t\t\treturn true;\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log('error creating DIR for ffmpeg.', err);\n\t\t\treturn false;\n\n\t\t});\n}\n\nexport async function encodeAudioToMP3(fileName: string, filePath: string, outputPath: string): Promise<boolean> {\n\treturn new Promise<boolean>(((resolve, reject) => {\n\t\tfs.ensureDir(outputPath)\n\t\t\t.then(() => {\n\t\t\t\tlet ffmpeg = spawn(`ffmpeg`, [`-i`, `${filePath}`, `-codec:a`, `libmp3lame`, `-b:a`, `320k`, `${outputPath}${fileName}.mp3`, `-y`]);\n\t\t\t\tffmpeg.on('exit', (code: string) => {\n\t\t\t\t\tconsole.log('ffmpeg::mp3 exited with code: ', code);\n\t\t\t\t\tif(0 === parseInt(code)) {\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error creating DIR for ffmpeg.', err);\n\t\t\t\treject(false);\n\t\t\t});\n\t\t}))\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/ffmpeg.service.ts","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 14\n// module chunks = 0","import {StoreManager, storeManager} from '../managers/store.manager';\nimport {LoginManager} from '../auth/login.manager';\nimport {openFile} from '../managers/fs.manager';\n\nvar storeM: StoreManager = storeManager();\nvar loginM: LoginManager =  new LoginManager();\n\nexport function publicEndpoints(socket: any) {\n\n    socket.on('0AUTH2_TWITTER::GET_URL', () => {\n\n    });\n\n\tsocket.on(\n\t\t'GET_ALL_SOUNDS_DETAILS',\n\t\tasync (sessionId: string, callback: any) => {\n\t\t\tconsole.log('socket ID from get?', socket.id);\n\t\t\tconst info = await storeM.getAllSoundsDetails();\n\t\t\tcallback({body: info, ok: true});\n\t\t}\n\t);\n\n\tsocket.on('LOGIN', async (payload: any, callback: (response: any) => void) => {\n\t\tconst rSResponse: any = await loginM.signInUser(payload.credentials, payload.sessionId);\n\t\tcallback(rSResponse);\n\t});\n\n\n\tsocket.on('GET_SOUND_DATA', async (payload: {[key: string]: any}, callback: (response: any) => void) => {\n\t\tconst document = await storeM.getSoundDetails({_id: payload.sound_id})\n\t\t\t.catch(err => {console.log('coudl not find document', err)});\n\t\tconst data: Buffer | any = await openFile(payload.sound_id)\n\t\t\t.catch(err => {console.log('file read error', err)});\n\t\tconsole.log('DATA \\n', data.toString(), document);\n\t\tcallback({ok: true, data: data});\n\t})\n}\n\n\n// WEBPACK FOOTER //\n// ./src/endpoints/public.endpoint.ts","import {UserModel} from '../odm/models/user.model';\nimport {SECRET} from '../_local.credentials';\nimport mongoose = require('mongoose');\nimport {JWT} from '../odm/models/json-web-token.model';\nimport {RSocketResponse} from '../models/response-socket.model';\nimport {Resolve} from 'awesome-typescript-loader/dist/checker/checker';\n\nconst bcrypt = require('bcryptjs');\nconst JSONWebToken = require('jsonwebtoken');\n\nexport class LoginManager {\n\n\tprivate User = mongoose.model('User', UserModel);\n\n\tpublic CreateUser(): void {\n\t\tthis.User.create({\n\t\t\tusername: 'ADMIN-NOCEBO',\n\t\t\tpassword: this.hashPassword('dementedGrapefruit00')\n\t\t}).then(res => res);\n\t}\n\n\tprivate hashPassword(password: string): string {\n\t\treturn bcrypt.hashSync(password, 8);\n\t}\n\n\tprivate async validatePassword(password: string, username: string): Promise<boolean> {\n\t\tconst user: any = await this.User.findOne({username: username});\n\t\tif (user) {\n\t\t\treturn bcrypt.compareSync(password, user.password);\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate returnSessionToken(body: {sessionId: string, username: string, uid: string}): string {\n\t\treturn JSONWebToken.sign({\n\t\t\tsessionId: body.sessionId,\n\t\t\tuser: body.username,\n\t\t\tuid: body.uid\n\t\t}, SECRET);\n\t}\n\n\tpublic async signInUser(credentials: { username: string, password: string }, sessionId: string): Promise<RSocketResponse> {\n\t\treturn await this.validatePassword(credentials.password, credentials.username)\n\t\t\t.then(async (isValid) => {\n\t\t\t\tif (isValid) {\n\t\t\t\t\tconst user: any = await this.User.findOne({username: credentials.username});\n\t\t\t\t\tif(user){\n\t\t\t\t\t\treturn {ok: true, payload: {jwt: this.returnSessionToken({sessionId: sessionId, username: user.username, uid: user._id})}};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {ok: false, message: 'User not found.'}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {ok: false, message: 'Credentials did not match.'};\n\t\t\t\t}\n\t\t});\n\t}\n\n\tpublic async jwtVerify(jwt: string): Promise<RSocketResponse> {\n\t\tconst jwtVerify = new Promise((resolve, reject): void => {\n\t\t\tJSONWebToken.verify(jwt, SECRET, (error: any, decoded: any) => {\n\t\t\t\tif(error){\n\t\t\t\t\treject({ok: false, message: 'JWT was invalid' + error});\n\t\t\t\t}\n\t\t\t\tresolve ({ok: true, payload: decoded});\n\t\t\t});\n\t\t});\n\t\treturn await jwtVerify as RSocketResponse;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/auth/login.manager.ts","var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nexport const UserModel = new Schema({\n\tusername: {\n\t\ttype: String,\n\t\tunique: true,\n\t\tindex: true,\n\t},\n\tpassword: String,\n\temail: String,\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/user.model.ts","export const SECRET = '1324trgjnfk.szfjaw3r9fbio2a3br23rw,eamf dsczpoh23RN.KNWedfscopjin23rWEAFSD0-9JIO2N3RWEFDS'\n\nexport const TWITTER = {\n\tAPIkey: 'ctDlQT5AXPKRCdVT1j8p8Y6fM',\n\tsecret: 'McEec0arxfxNiKzz6C2GfVahoIuJOXZM5ioMPOkAqWzbBDto3w'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/_local.credentials.ts","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 20\n// module chunks = 0","import {LoginManager} from '../auth/login.manager';\nimport {storeManager} from '../managers/store.manager';\nimport {SoundDetailsModel} from '../odm/models/sound-info.model';\nimport {saveSound} from '../services/transcoding.service';\n\nconst loginM = new LoginManager();\nconst storeM = storeManager();\n\nexport function sessionEndpoints(socket: any) {\n\n\tconst endpointJWT: any = (path: string, jwt: string, action: {\n\t\tverb: string,\n\t\tpayload: any\n\t}, mainFunction: any) => {\n\t\tsocket.on(path, async () => {\n\t\t\tconst {sessionId}: any = loginM.jwtVerify(jwt);\n\t\t\tif (sessionId){\n\t\t\t\tconst response = mainFunction();\n\t\t\t\tif (response.ok){\n\t\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, response);\n\t\t\t\t} else {\n\t\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, response);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, {\n\t\t\t\t\tok: false,\n\t\t\t\t\tmessage: `Error with ${path}.`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tsocket.on('SESSION_AUTH', async (jwt: any, sessionId: string) => {\n\t\tif (loginM.jwtVerify(jwt)) {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {ok: true});\n\t\t} else {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'Failed to get track by prop.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('REGISTER_NEW_SOUND', async (payload: {jwt: string, sessionId: string, formData: SoundDetailsModel}, callback: (response: any) => void) => {\n\t\tconst jwtResponse: any = await loginM.jwtVerify(payload.jwt);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse = await storeM.registerNewSound(payload.formData, jwtResponse.payload.uid);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('SESSION::UPDATE_SOUND_DETAIL', async (payload: any, callback: (response: any) => void) => {\n\t\tconst jwtResponse: any = await loginM.jwtVerify(payload.jwt);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse = await storeM.updateSoundByProp(payload.sound_id, payload.prop);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('SESSION::FILE_UPLOAD', async (payload: any, ack: (responseTransport: any) => void) => {\n\t\tconst jwtResponse = await loginM.jwtVerify(payload.jwt);\n\t\tif (jwtResponse.ok){\n\t\t\tconst response = await saveSound(jwtResponse.payload.uid, payload.song_id, payload.data)\n\t\t\t\t.catch(err => console.log('Error: Saving sound to system.', err));\n\t\t\tack(response);\n\t\t} else {\n\t\t\tack({ok: false, message: 'JWT not valid. Please log in again.'});\n\t\t}\n\t});\n}\n\n\n// WEBPACK FOOTER //\n// ./src/endpoints/session.endpoint.ts","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}
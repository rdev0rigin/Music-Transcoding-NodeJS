{"version":3,"sources":["webpack:///webpack/bootstrap 34ecc81e861db40722d9","webpack:///./src/main.ts","webpack:///./src/service.ts","webpack:///external \"https\"","webpack:///external \"express\"","webpack:///./src/odm/db.config.ts","webpack:///external \"mongoose\"","webpack:///./src/managers/store.manager.ts","webpack:///./src/odm/models/track.model.ts","webpack:///./src/odm/models/manifest.model.ts","webpack:///./src/odm/models/sound-info.model.ts","webpack:///./src/odm/models/track-data.model.ts","webpack:///./src/endpoints/public.endpoint.ts","webpack:///./src/auth/login.manager.ts","webpack:///./src/odm/models/user.model.ts","webpack:///./src/_local.credentials.ts","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\"","webpack:///./src/endpoints/session.endpoint.ts","webpack:///external \"fs\"","webpack:///external \"socket.io\""],"names":[],"mappings":"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","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 34ecc81e861db40722d9","import Service from './service';\n\nfunction boot() {\n\tService.bootstrap();\n}\n\n\n\nboot();\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import * as https from 'https';\nimport * as express from 'express';\nimport dbConfig = require('./odm/db.config');\nimport {storeManager} from './managers/store.manager';\nimport {publicEndpoints} from './endpoints/public.endpoint';\nimport Socket = SocketIO.Socket;\nimport {LoginManager} from './auth/login.manager';\nimport {sessionEndpoints} from './endpoints/session.endpoint';\nimport * as fs from 'fs';\n\nexport class BackendServices {\n\tprivate app: express.Application = express();\n\tprivate server: https.Server;\n\tprivate port: number = 2820;\n\tprivate socket: SocketIO.Server = require('socket.io')(2820, {\n\n\t});\n\tprivate clients: {}[] = [];\n\tprivate storeManager: any;\n\tprivate loginManager: LoginManager;\n\tprivate generalAPI: any;\n\tprivate sessionAPI: any;\n\n\tpublic static bootstrap(): BackendServices {\n\t\treturn new BackendServices();\n\t};\n\n\tconstructor() {\n\t\tthis.init();\n\t\tthis.setupWS();\n\t\tdbConfig();\n\t};\n\n\tprivate setupWS(): void {\n\t\tthis.socket.on('connect', (socket: Socket) => {\n\t\tthis.generalAPI = publicEndpoints(socket);\n\t\tthis.sessionAPI = sessionEndpoints(socket);\n\t\tthis.clients = [...this.clients, socket];\n\t\tvar index = this.clients.length - 1;\n\t\t\tsocket.on('disconnecting', () => {\n\t\t\t\tconsole.log('index on close', index);\n\t\t\t\tthis.clients.splice(index, 1)\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate init(): void {\n\t\tthis.server = https.createServer({\n\n\t\t\tcert: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/certificate.pem'),\n\t\t\tkey: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/key.pem')\n\t\t}, this.app);\n\t\tthis.server.listen(this.port, 'localhost');\n\t\tthis.storeManager = storeManager();\n\t\tthis.loginManager = new LoginManager();\n\t}\n}\n\nexport default BackendServices;\n\n\n\n// WEBPACK FOOTER //\n// ./src/service.ts","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","export = () => {\n\tlet mongoose = require('mongoose');\n\tlet db = mongoose.connection;\n\tmongoose.connect('mongodb://localhost:27017/dcomp_store_root', {\n\t\tuseMongoClient: true\n\t});\n\tdb.on('error', console.error.bind(console, 'connection error'));\n\tdb.once('open', () => {\n\t\tconsole.log('Db Connected!');\n\t});\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/db.config.ts","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 6\n// module chunks = 0","import {TrackDataSchema} from '../odm/models/track.model';\nimport mongoose = require('mongoose');\nimport {StoreManifest} from '../odm/models/manifest.model';\nimport {Document} from 'mongoose';\nimport {SoundInfoModel, SoundInfoSchema} from '../odm/models/sound-info.model';\nimport {TrackDataBufferSchema} from '../odm/models/track-data.model';\nvar Track = mongoose.model('Track', TrackDataSchema);\nvar Manifest = mongoose.model('Manifest', StoreManifest);\nvar SoundInfo = mongoose.model('SoundInfo', SoundInfoSchema);\nvar TrackData = mongoose.model('TrackData', TrackDataBufferSchema);\n\n\nexport interface TrackForm {\n\ttitle: string;\n\tkey: string;\n\troute: string;\n\tslug: string;\n\tmode: string;\n}\n\nexport interface TrackFiles {\n\tmp3Data: string;\n\tmp4Data: string;\n\timgData: string;\n\timgURL: string;\n\tsoundURL: string;\n\tvideoURL: string;\n}\n\nexport interface StoreManager {\n\tgetTrackByProp(prop: {}): Promise<Document | null>;\n\n\tgetAllSoundsInfo(): Promise<Document[] | undefined>;\n\n\tgetStreamById(): any;\n\n\tcreateWith(payload: any, type: string): Promise<any>;\n\n\tregisterNewSound(formData: SoundInfoModel): Promise<Document>;\n\n\tregisterNewTrack(formData: TrackForm, fileData: TrackFiles): Promise<Document>;\n\n\tupdateTrackRecord(payload: any, prop: { [key: string]: any }): Promise<Document | null | undefined>\n\n\tupdateByProp(payload: any, prop: { [key: string]: any }, type: string): Promise<any>;\n\n\tgetWholeFile(prop: {[key: string]:string}, type: string): Promise<any>;\n\n\tuploadTrackFile(trackId: string, type: string, encoding: string, file: any ): Promise<any>\n}\n\nexport function storeManager(): StoreManager {\n\t// update resource index\n\tasync function uploadFile(fileProp: {[key: string]: any}, id?: string): Promise<Buffer> {\n\t\tconst key = Object.keys(fileProp)[0];\n\t\treturn new Buffer(fileProp[key], 'base64');\n\t}\n\n\treturn {\n\t\tgetTrackByProp: async (prop: { [key: string]: any }) => {\n\t\t\treturn await Track.findOne(prop);\n\t\t},\n\t\tgetAllSoundsInfo: async () => {\n\t\t\treturn await SoundInfo.find();\n\t\t},\n\t\tgetStreamById: () => {\n\t\t\t//  const { Writable } = require('stream');\n\t\t\t//  const myWritable = new Writable({\n\t\t\t// \twrite(chunk, encoding, callback) {\n\t\t\t// \t\t// ...\n\t\t\t// \t},\n\t\t\t// \twritev(chunks, callback) {\n\t\t\t// \t\t// ...\n\t\t\t// \t}\n\t\t\t// });\n\t\t\t// const readable = new ReadableStream()\n\t\t},\n\t\tcreateWith: async (payload: any, type: string): Promise<Document[] | void> => {\n\t\t\tconst model = getModel(type);\n\t\t\tif (!model){\n\t\t\t\treturn void 0;\n\t\t\t}\n\t\t\treturn await model.create(payload)\n\t\t\t\t.then(value => {\n\t\t\t})\n\t\t\t\t.catch(err => {console.log('store error', err)})\n\t\t},\n\t\tregisterNewSound: async (formData: SoundInfoModel): Promise<Document> => {\n\t\t\treturn await SoundInfo.create(formData);\n\t\t},\n\t\tregisterNewTrack: async (formData: TrackForm, fileData: TrackFiles): Promise<Document> => {\n\t\t\tconst { title, key, route, slug, mode }: any = formData;\n\t\t\tconst { mp3Data, mp4Data, imgData, soundURL, videoURL, imgURL }: any = fileData;\n\t\t\treturn await Track.create({\n\t\t\t\ttitle: title,\n\t\t\t\tkey: key,\n\t\t\t\troute: route,\n\t\t\t\tslug: slug,\n\t\t\t\tmode: mode,\n\t\t\t\tmp3Data: mp3Data || '',\n\t\t\t\tmp4Data: mp4Data || '',\n\t\t\t\timgData: imgData || '',\n\t\t\t\timgURL: imgURL || '',\n\t\t\t\tsoundURL: soundURL || '',\n\t\t\t\tvideoURL: videoURL || '',\n\t\t\t})\n\t\t},\n\t\tupdateTrackRecord: async (payload: any, prop: {[key: string]: any}) => {\n\t\t\tif (await Track.find(prop).update(payload) > 0) {\n\t\t\t\treturn await Track.findOne(prop);\n\t\t\t} else {\n\t\t\t\treturn void 0;\n\t\t\t}\n\t\t},\n\t\tupdateByProp: async (payload: any, prop: {[key: string]: any }, type: string) => {\n\t\t\tconst model = getModel(type);\n\t\t\tif (!model) {\n\t\t\t\treturn void 0;\n\t\t\t}\n\t\t\treturn await model.find(prop).update(payload).exec()\n\t\t},\n\t\tgetWholeFile: async (prop: { [key: string]:string}, type: string): Promise<Document[] | void> => {\n\t\t\tconst model = getModel(type);\n\t\t\tif (!model){\n\t\t\t\treturn void 0;\n\t\t\t}\n\t\t\treturn await model.findOne(prop)\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('store error', err)\n\t\t\t});\n\t\t},\n\t\tuploadTrackFile: async (trackId: string, type: string, encoding: string, file: any): Promise<any> => {\n\t\t\tconsole.log(file);\n\t\t\tlet values: any = {\n\t\t\t\ttrack_id: trackId\n\t\t\t};\n\t\t\tswitch(type){\n\t\t\t\tcase'VIDEO':\n\t\t\t\t\tvalues = {\n\t\t\t\t\t\t...values,\n\t\t\t\t\t\tvideoData: file,\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase'SOUND':\n\t\t\t\t\tvalues = {\n\t\t\t\t\t\t...values,\n\t\t\t\t\t\tsoundData: file,\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase'IMAGE':\n\t\t\t\t\tvalues = {\n\t\t\t\t\t\t...values,\n\t\t\t\t\t\timgData: file,\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn {ok: false, message: 'No File Type Found'}\n\t\t\t}\n\t\t\tconst ifTrack = await TrackData.findOne({track_id: trackId});\n\t\t\tconsole.log('ifTrack', ifTrack);\n\t\t\tif(ifTrack) {\n\t\t\t\treturn await ifTrack.update(values);\n\t\t\t}\n\t\t\treturn await TrackData.create(values);\n\t\t},\n\t}\n}\n\nfunction getModel(type: string) {\n\tswitch (type) {\n\t\tcase'TRACK':\n\t\t\treturn Track;\n\t\tcase'MANIFEST':\n\t\t\treturn Manifest;\n\t\tdefault:\n\t\t\tconsole.log('error no model found of type', type);\n\t\t\treturn null;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/managers/store.manager.ts","var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nexport interface TrackInfo {\n\tid: string;\n\ttitle: string;\n\tkey: string;\n\tslug: string;\n\troute: string;\n\tmode: string;\n}\n\nexport interface TrackStats {\n\ttrack_id: string;\n\tlikes: number;\n\tdownloads: number;\n\tshares: number;\n\tplays: number;\n}\n\nexport interface TrackModel extends TrackInfo, TrackStats {\n\tid: string;\n\tmp3Data: Buffer;\n\tmp4Data: Buffer;\n\timgData: Buffer;\n\timgURL: string;\n\tsoundS3URL: string;\n\tvideoS3URL: string;\n}\n\nexport const TrackDataSchema = new Schema({\n\tid: String,\n\tmp3Data: Buffer,\n\tmp4Data: Buffer,\n\timgData: Buffer,\n\timgURL: String,\n\tsoundURL: String,\n\tvideoURL: String,\n\tslug: String,\n\tmode: String,\n\ttitle: String,\n\tkey: String,\n\troute: String,\n});\n\nexport const TrackStats = new Schema({\n\tlikes: Number,\n\tdownloads: Number,\n\tshares: Number,\n\tplays: Number,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/track.model.ts","import * as mongoose from 'mongoose';\nimport {TrackInfo} from './track.model';\n\nvar Schema = mongoose.Schema;\n\nexport interface RawManifest {\n\ttrackStats: {\n \t\t[key: string]: TrackInfo\n\t}\n}\nexport interface ManifestModel {\n\t_id: string;\n\tmanifest: string;\n}\n\nexport const StoreManifest = new Schema({\n\tmanifest: String\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/manifest.model.ts","import * as mongoose from 'mongoose';\n\nvar Schema = mongoose.Schema;\n\nexport interface SoundInfoModel {\n\tid?: string;\n\tsound_id?: string;\n\tsoundURL: string;\n\tvideoURL?: string;\n\timgURL?: string;\n\ttitle: string;\n\tdescription: string;\n}\n\nexport const SoundInfoSchema = new Schema({\n\tid: String,\n\tsound_id: String,\n\tsoundURL: String,\n\tvideoURL: String,\n\timgURL: String,\n\ttitle: String,\n\tdescription: String\n});\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/sound-info.model.ts","var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nexport interface TrackDataBufferModel {\n\tid?: string;\n\ttrack_id: string;\n\ttype?: string;\n\tsoundData?: Buffer;\n\tvideoData?: Buffer;\n\timgData?: Buffer;\n}\n\nexport const TrackDataBufferSchema = new Schema({\n\tid: String,\n\ttrack_id: {\n\t\ttype: String,\n\t\tunique: true,\n\t\tindex: true\n\t},\n\tsoundData: String,\n\tvideoData: String,\n\timgData: String,\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/track-data.model.ts","import {StoreManager, storeManager} from '../managers/store.manager';\nimport {LoginManager} from '../auth/login.manager';\n\nvar storeM: StoreManager = storeManager();\nvar loginM: LoginManager =  new LoginManager();\n\nexport function publicEndpoints(socket: any) {\n    socket.on('0AUTH2_TWITTER::GET_URL', () => {\n\n    });\n\n\tsocket.on('GET_SONG_BY_PROP', async (payload: {prop: any, sessionId: string}) => {\n\t\tconsole.log('get song', payload);\n\t\tconst track = await storeM.getTrackByProp(payload.prop);\n\t\tif (track) {\n\t\t\tsocket.emit(`GET_SONG_BY_PROP::CLIENT_${payload.sessionId}`, {ok: true, track: track});\n\t\t} else {\n\t\t\tsocket.emit(`GET_SONG_BY_PROP::CLIENT_${payload.sessionId}`, {ok: false, message: 'Failed to get track by prop.'});\n\t\t}\n\t});\n\n\tsocket.on('GET_ALL_MUSIC_DETAILS', async (sessionId: string) => {\n\t\tconst info = await storeM.getAllSoundsInfo();\n\t\tif (info) {\n\t\tconsole.log('get info', info, sessionId);\n\t\t\tsocket.emit(`GET_ALL_MUSIC_DETAILS::CLIENT_${sessionId}`, {ok: true, ...info});\n\t\t} else {\n\t\t\tsocket.emit(`GET_ALL_MUSIC_DETAILS::CLIENT_${sessionId}`, {ok: false, message: 'Failed to get track by prop.'});\n\t\t}\n\t});\n\n\tsocket.on('GET_ALL_SOUND_INFO', async (sessionId: string) => {\n\t\tconsole.log('getting', sessionId);\n\t\tconst info = await storeM.getAllSoundsInfo();\n\t\tif (info) {\n\t\tconsole.log('get info', info, sessionId);\n\t\t\tsocket.emit(`GET_ALL_SOUND_INFO::CLIENT_${sessionId}`, {ok: true, payload: info});\n\t\t} else {\n\t\t\tsocket.emit(`GET_ALL_SOUND_INFO::CLIENT_${sessionId}`, {ok: false, message: 'Failed to get track by prop.'});\n\t\t}\n\t});\n\n\tsocket.on('GET_SONG_DATA', async (payload: any) => {\n\t\tconst file = await storeM.getWholeFile(payload.prop, payload.type);\n\t\tif (file) {\n\t\t\tsocket.emit(`GET_SONG_DATA::CLIENT_${payload.sessionId}`, {ok: true, file: file});\n\t\t} else {\n\t\t\tsocket.emit(`GET_SONG_DATA::CLIENT_${payload.sessionId}`, {ok: false, message: 'Failed to get track by prop.'});\n\t\t}\n\t});\n\n\tsocket.on('LOGIN', async (payload: any) => {\n\t\tconst rSResponse:\n\t\t\tany = await loginM.signInUser(payload.credentials, payload.sessionId);\n\t\tconsole.log('jwt response', rSResponse);\n\t\tif (rSResponse.ok) {\n\t\t\tsocket.emit(`LOGIN::CLIENT_${payload.sessionId}`, rSResponse);\n\t\t} else {\n\t\t\tsocket.emit(`LOGIN::CLIENT_${payload.sessionId}`, rSResponse);\n\t\t}\n\t});\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/endpoints/public.endpoint.ts","import {UserModel} from '../odm/models/user.model';\nimport {SECRET} from '../_local.credentials';\nimport mongoose = require('mongoose');\nimport {JWT} from '../odm/models/json-web-token.model';\nimport {RSocketResponse} from '../models/response-socket.model';\nimport {Resolve} from 'awesome-typescript-loader/dist/checker/checker';\n\nconst bcrypt = require('bcryptjs');\nconst JSONWebToken = require('jsonwebtoken');\n\nexport class LoginManager {\n\n\tprivate User = mongoose.model('User', UserModel);\n\n\tprivate CreateUser(): void {\n\t\tthis.User.create({\n\t\t\tusername: 'ADMIN-NOCEBO',\n\t\t\tpassword: this.hashPassword('dementedGrapefruit00')\n\t\t}).then(res => res);\n\t}\n\n\tprivate hashPassword(password: string): string {\n\t\treturn bcrypt.hashSync(password, 8);\n\t}\n\n\tprivate async validatePassword(password: string, username: string): Promise<boolean> {\n\t\tconst user: any = await this.User.findOne({username: username});\n\t\tconsole.log('user', user);\n\t\tif (user) {\n\t\t\treturn bcrypt.compareSync(password, user.password);\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate returnSessionToken(body: {sessionId: string, username: string}): string {\n\t\treturn JSONWebToken.sign({\n\t\t\tsessionId: body.sessionId,\n\t\t\tuser: body.username\n\t\t}, SECRET);\n\t}\n\n\tpublic async signInUser(credentials: { username: string, password: string }, sessionId: string): Promise<RSocketResponse> {\n\t\treturn await this.validatePassword(credentials.password, credentials.username)\n\t\t\t.then(async (isValid) => {\n\t\t\t\tif (isValid) {\n\t\t\t\t\tconst user: any = await this.User.findOne({username: credentials.username});\n\t\t\t\t\tif(user){\n\t\t\t\t\t\treturn {ok: true, payload: {jwt: this.returnSessionToken({sessionId: sessionId, username: user.username})}};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {ok: false, message: 'User not found.'}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('logged in failed', credentials);\n\t\t\t\t\treturn {ok: false, message: 'Credentials did not match.'};\n\t\t\t\t}\n\t\t});\n\t}\n\n\tpublic async jwtVerify(jwt: string): Promise<RSocketResponse> {\n\t\tconst jwtVerify = new Promise((resolve, reject): void => {\n\t\t\tJSONWebToken.verify(jwt, SECRET, (error: any, decoded: any) => {\n\t\t\t\tif(error){\n\t\t\t\t\treject({ok: false, message: 'JWT was invalid' + error});\n\t\t\t\t}\n\t\t\t\tresolve ({ok: true, payload: decoded});\n\t\t\t});\n\t\t});\n\t\treturn await jwtVerify as RSocketResponse;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/auth/login.manager.ts","var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nexport const UserModel = new Schema({\n\tusername: {\n\t\ttype: String,\n\t\tunique: true,\n\t\tindex: true,\n\t},\n\tpassword: String,\n\temail: String,\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/user.model.ts","export const SECRET = '1324trgjnfk.szfjaw3r9fbio2a3br23rw,eamf dsczpoh23RN.KNWedfscopjin23rWEAFSD0-9JIO2N3RWEFDS'\n\nexport const TWITTER = {\n\tAPIkey: 'ctDlQT5AXPKRCdVT1j8p8Y6fM',\n\tsecret: 'McEec0arxfxNiKzz6C2GfVahoIuJOXZM5ioMPOkAqWzbBDto3w'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/_local.credentials.ts","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 17\n// module chunks = 0","import {LoginManager} from '../auth/login.manager';\nimport {storeManager} from '../managers/store.manager';\nimport {JWT} from '../odm/models/json-web-token.model';\nimport {SoundInfoModel} from '../odm/models/sound-info.model';\nimport {RSocketResponse} from '../models/response-socket.model';\n\nconst loginM = new LoginManager();\nconst storeM = storeManager();\n\nexport function sessionEndpoints(socket: any) {\n\n\tconst endpointJWT: any = (path: string, jwt: string, action: {\n\t\tverb: string,\n\t\tpayload: any\n\t}, mainFunction: any) => {\n\t\tsocket.on(path, async () => {\n\t\t\tconst {sessionId}: any = loginM.jwtVerify(jwt);\n\t\t\tif (sessionId){\n\t\t\t\tconst response = mainFunction();\n\t\t\t\tif (response.ok){\n\t\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, response);\n\t\t\t\t} else {\n\t\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, response);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsocket.emit(`${path}::CLIENT_${sessionId}`, {\n\t\t\t\t\tok: false,\n\t\t\t\t\tmessage: `Error with ${path}.`,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tsocket.on('SESSION_AUTH', async (jwt: any, sessionId: string) => {\n\t\tif (loginM.jwtVerify(jwt)) {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {ok: true});\n\t\t} else {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'Failed to get track by prop.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('REGISTER_NEW_SOUND', async (payload: {jwt: string, sessionId: string, formData: SoundInfoModel}) => {\n\t\tconsole.log('Register New Sound\\n', payload);\n\t\tconst JWT: JWT | any = await loginM.jwtVerify(payload.jwt);\n\t\tconsole.log('JWT \\n', JWT);\n\t\tif (JWT.ok) {\n\t\t\tconst rSResponse = await storeM.registerNewSound(payload.formData);\n\t\t\tconsole.log('rsResponse', rSResponse);\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${JWT.decoded.sessionId}`, rSResponse);\n\t\t} else {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${payload.sessionId}`, {\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('SESSION::UPLOAD_TRACK_FILE', async (payload: {jwt: string, sessionId: string, formData: any}) => {\n\t\tconst JWT: RSocketResponse = await loginM.jwtVerify(payload.jwt);\n\t\tif(JWT.ok && JWT.payload.sessionId === payload.sessionId) {\n\t\t\tconst {trackId, type, encoding, file} = payload.formData;\n\t\t\tconst uploadResult = await storeM.uploadTrackFile(trackId, type, encoding, file)\n\t\t\t\t.catch(err => console.log('err upload', err));\n\t\t\tsocket.emit(`SESSION::UPLOAD_TRACK_FILE::CLIENT_${JWT.payload.sessionId}`, uploadResult);\n\t\t} else {\n\t\t\tsocket.emit(`SESSION::UPLOAD_TRACK_FILE::CLIENT_${payload.sessionId}`,\n\t\t\t\t{\n\t\t\t\t\tpayload: payload.formData,\n\t\t\t\t\tok: false,\n\t\t\t\t\tmessage: 'JWT is invalid.',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\tsocket.on('SESSION::UPLOAD_VIDEO', async (jwt: string, sessionId: string) => {\n\t\tif (await loginM.jwtVerify(jwt)) {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {ok: true});\n\t\t} else {\n\t\t\tsocket.emit(`SESSION_AUTH::CLIENT_${sessionId}`, {\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JWT is invalid.',\n\t\t\t});\n\t\t}\n\t});\n}\n\n\n// WEBPACK FOOTER //\n// ./src/endpoints/session.endpoint.ts","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 20\n// module chunks = 0"],"sourceRoot":""}
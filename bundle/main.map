{"version":3,"sources":["webpack:///webpack/bootstrap 63c3f448c81f5218d905","webpack:///external \"mongoose\"","webpack:///external \"fs-extra\"","webpack:///./src/managers/store.manager.ts","webpack:///./src/_local.credentials.ts","webpack:///./src/auth/login.manager.ts","webpack:///./src/main.ts","webpack:///./src/backend.ts","webpack:///./src/odm/db.config.ts","webpack:///external \"bluebird\"","webpack:///external \"https\"","webpack:///./src/odm/models/sound-info.model.ts","webpack:///./src/odm/models/statistics.model.ts","webpack:///./src/odm/models/metrics.model.ts","webpack:///./src/events/public.events.ts","webpack:///external \"jsonwebtoken\"","webpack:///./src/odm/models/user.model.ts","webpack:///external \"bcryptjs\"","webpack:///./src/events/private.events.ts","webpack:///./src/services/transcoding.service.ts","webpack:///./src/managers/fs.manager.ts","webpack:///./src/services/ffmpeg.service.ts","webpack:///external \"child_process\"","webpack:///external \"path\"","webpack:///external \"crypto\"","webpack:///external \"socket.io\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,qC;;;;;;ACAA,qC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,sCAAsC;AACtC,iDAA+E;AAE/E,iDAAkF;AAClF,8CAAwE;AAGxE,IAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,6BAAa,CAAC,CAAC;AACzD,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,YAAY,EAAE,oCAAiB,CAAC,CAAC;AAC9D,IAAM,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,kCAAe,CAAC,CAAC;AA4BhE;IAEC,MAAM,CAAC;QACN,mEAAmE;QACnE,8DAA8D;QAC9D,wEAAwE;QACxE,0CAA0C;QAC1C,KAAK;QACC,UAAU,EAAhB,UAAiB,OAAe,EAAE,MAAU;;;;;gCACzB,qBAAM,OAAO;iCAC7B,QAAQ,CAAC,OAAO,CAAC;iCACjB,MAAM,cAAK,MAAM,IAAE,OAAO,EAAE,OAAO,IAAE;iCACrC,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,GAAG,CAAC,EAA1C,CAA0C,CAAC;;4BAHpD,SAAS,GAAG,SAGwC;4BAC1D,EAAE,CAAC,CAAC,SAAS,CAAC,EAAC;gCACd,MAAM,gBAAC,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAC;4BACtC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,yBAAyB,EAAC,EAAC;4BACxD,CAAC;;;;;SACD;QACK,gBAAgB,EAAtB,UAAuB,OAAqB;;;;;gCACxB,qBAAM,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iCAC9C,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,GAAG,CAAC,EAA1C,CAA0C,CAAC;;4BADpD,SAAS,GAAI,SACuC;4BAC1D,EAAE,CAAC,CAAC,SAAS,CAAC,EAAC;gCACd,MAAM,gBAAC,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAC;4BACtC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,yBAAyB,EAAC,EAAC;4BACxD,CAAC;;;;;SACD;QACK,aAAa,EAAnB,UAAoB,OAAe;;;;gCAC3B,qBAAM,KAAK;iCAChB,QAAQ,CAAC,OAAO,CAAC;iCACjB,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,EAAxC,CAAwC,CAAC;gCAFxD,sBAAO,SAEiD,EAAC;;;;SACzD;QACK,aAAa,EAAnB,UAAoB,OAAe,EAAE,IAAqB;;;;gCAClD,qBAAM,KAAK;iCAChB,QAAQ,CAAC,OAAO,CAAC;iCACjB,MAAM,cAAK,IAAI,IAAE,QAAQ,EAAE,OAAO,IAAE;iCACpC,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,EAAxC,CAAwC,CAAC;gCAHxD,sBAAO,SAGiD,EAAC;;;;SAEzD;QACK,cAAc,EAApB,UAAqB,KAAsB;;;;gCACnC,qBAAM,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;iCAC9B,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,EAAxC,CAAwC,CAAC;gCADxD,sBAAO,SACiD,EAAC;;;;SACzD;QAEK,YAAY,EAAlB,UAAmB,KAAuC;;;oBACzD,sBAAO,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;6BAC3B,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,EAAxC,CAAwC,CAAC,EAAC;;;SACzD;QACK,gBAAgB,EAAtB;;;;gCACQ,qBAAM,UAAU,CAAC,IAAI,EAAE;iCAC5B,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,EAAxC,CAAwC,CAAC;gCADxD,sBAAO,SACiD,EAAC;;;;SACzD;QACK,gBAAgB,EAAtB,UAAuB,QAA8B,EAAE,MAAM;;;;;gCACzC,qBAAM,UAAU,CAAC,MAAM,cAAK,QAAQ,IAAE,OAAO,EAAE,MAAM,IAAE;;4BAApE,UAAU,GAAG,SAAuD;4BAC1E,EAAE,CAAC,CAAC,UAAU,CAAC,EAAC;gCACf,MAAM,gBAAC,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAC;4BACvC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACP,sDAAsD;gCACtD,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAC,EAAC;4BACzC,CAAC;;;;;SACD;QACK,iBAAiB,EAAvB,UAAwB,EAAU,EAAE,IAA0B;;;;;;4BAC7D,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;4BACV,qBAAM,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC;qCACjD,KAAK,CAAC,UAAC,GAAQ,IAAK,cAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,EAAzB,CAAyB,CAAC;;4BAD1C,QAAQ,GAAQ,SAC0B;4BAChD,EAAE,EAAC,QAAQ,CAAC,EAAC;gCACZ,MAAM,gBAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;yCAC1B,KAAK,CAAC,UAAC,GAAQ,IAAK,cAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,EAA1B,CAA0B,CAAC,EAAC;4BACnD,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,6BAA6B,EAAC,EAAC;4BAC5D,CAAC;;;;;SACD;QACK,eAAe,EAArB,UAAsB,EAAU;;;;;;4BAC/B,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC;4BACjB,qBAAM,UAAU,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,EAAE,EAAC,CAAC;;4BAA7C,QAAQ,GAAG,SAAkC;4BACnD,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;4BACxC,sBAAO,QAAQ,EAAC;;;;SAChB;KACD;AACF,CAAC;AAhFD,oCAgFC;;;;;;;;;;ACrHY,cAAM,GAAG,2FAA2F,CAAC;AAErG,eAAO,GAAG;IACtB,MAAM,EAAE,2BAA2B;IACnC,MAAM,EAAE,oDAAoD;CAC5D,CAAC;AAEW,eAAO,GAAG;IACtB,IAAI,EAAE,YAAY;IAClB,GAAG,EAAE,aAAa;CAClB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVF,2CAA6C;AAC7C,sCAAsC;AACtC,2CAAqD;AAErD,kDAA6C;AAC7C,IAAM,MAAM,GAAG,mBAAO,CAAC,EAAU,CAAC,CAAC;AAEnC;IAAA;QAES,SAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,sBAAS,CAAC,CAAC;IA4ElD,CAAC;IA1Ea,iCAAU,GAAvB;;;;4BACC,qBAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;4BACtB,QAAQ,EAAE,cAAc;4BACxB,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,sBAAsB,CAAC;yBACnD,CAAC,CAAC,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,GAAG,CAAC,EAArC,CAAqC,CAAC;;wBAHtD,SAGsD,CAAC;;;;;KACvD;IAEO,mCAAY,GAApB,UAAqB,QAAgB;QACpC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IACrC,CAAC;IAEa,uCAAgB,GAA9B,UAA+B,QAAgB,EAAE,QAAgB;;;;;4BAC9C,qBAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAC,CAAC;;wBAAzD,IAAI,GAAQ,SAA6C;wBAC/D,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACV,MAAM,gBAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAC;wBACpD,CAAC;wBACD,sBAAO,KAAK,EAAC;;;;KACb;IAEO,yCAAkB,GAA1B,UACC,IAIC;QAED,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC;YACxB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,IAAI,EAAE,IAAI,CAAC,QAAQ;YACnB,GAAG,EAAE,IAAI,CAAC,GAAG;SACb,EAAE,2BAAM,CAAC,CAAC;IACZ,CAAC;IAEY,iCAAU,GAAvB,UAAwB,WAA6C,EAAE,SAAiB;;;;;4BACvE,qBAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,QAAQ,CAAC;;wBAA5E,OAAO,GAAG,SAAkE;6BAC9E,OAAO,EAAP,wBAAO;wBACQ,qBAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,QAAQ,EAAE,WAAW,CAAC,QAAQ,EAAC,CAAC;;wBAArE,IAAI,GAAQ,SAAyD;wBAC3E,EAAE,EAAC,IAAI,CAAC,EAAC;4BACR,MAAM,gBAAC;oCACN,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;wCAClB,GAAG,EAAE,IAAI,CAAC,kBAAkB,CAAC;4CAC5B,SAAS,EAAE,SAAS;4CACpB,QAAQ,EAAE,IAAI,CAAC,QAAQ;4CACvB,GAAG,EAAE,IAAI,CAAC,GAAG;yCACb,CAAC;qCACF;iCACD,EAAC;wBACH,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACP,MAAM,gBAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,EAAC;wBAC/C,CAAC;;4BAED,sBAAO,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,4BAA4B,EAAC,EAAC;;;;;KAE3D;IAEY,gCAAS,GAAtB,UAAuB,GAAW,EAAE,SAAiB;;;;;;wBAC9C,SAAS,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;4BAC7C,YAAY,CAAC,MAAM,CAClB,GAAG,EACH,2BAAM,EACN,UAAC,KAAU,EAAE,OAAY;gCACxB,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC;oCAChD,MAAM,CAAC;wCACN,EAAE,EAAE,KAAK;wCACT,OAAO,EAAE,iBAAiB,GAAG,KAAK;qCAClC,CAAC,CAAC;gCACJ,CAAC;gCACD,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gCACtB,OAAO,CAAE,EAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;4BACxC,CAAC,CACD,CAAC;wBACH,CAAC,CAAC,CAAC;wBACI,qBAAM,SAAS;4BAAtB,sBAAO,SAAkC,EAAC;;;;KAC1C;IACF,mBAAC;AAAD,CAAC;AA9EY,oCAAY;;;;;;;;;;;;;;;;;ACPzB,uCAAkC;AAElC;IACC,iBAAS,CAAC,SAAS,EAAE,CAAC;AACvB,CAAC;AAED,IAAI,EAAE,CAAC;;;;;;;;;;ACNP,yCAAwC;AAExC,oCAA+B;AAC/B,gCAA+B;AAE/B,6CAAsE;AACtE,8CAAsD;AACtD,+CAAwD;AAGxD;IAkBC;QAfQ,SAAI,GAAG,IAAI,CAAC;QACZ,WAAM,GAAoB,mBAAO,CAAC,EAAW,CAAC,CAAC,IAAI,EAAE;YAC5D,MAAM,EAAE,IAAI;YACZ,UAAU,EAAE,CAAC,WAAW,CAAC;SACzB,CAAC,CAAC;QACF,qCAAqC;QAC9B,YAAO,GAAa,EAAE,CAAC;QAU9B,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,OAAO,EAAE,CAAC;IAChB,CAAC;IAPa,yBAAS,GAAvB;QACC,MAAM,CAAC,IAAI,eAAe,EAAE,CAAC;IAC9B,CAAC;IAAA,CAAC;IAKD,CAAC;IAEM,iCAAO,GAAf;QAAA,iBAaC;QAZA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,MAAc;YACxC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;YAC3C,KAAI,CAAC,YAAY,GAAG,4BAAY,CAAC,MAAM,CAAC,CAAC;YACzC,KAAI,CAAC,aAAa,GAAG,8BAAa,CAAC,MAAM,CAAC,CAAC;YAC3C,KAAI,CAAC,OAAO,GAAO,KAAI,CAAC,OAAO,SAAE,MAAM,CAAC,EAAE,EAAC,CAAC;YAE5C,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,UAAC,GAAQ;gBACnC,IAAM,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAC,KAAK,IAAK,YAAK,KAAK,MAAM,CAAC,EAAE,EAAnB,CAAmB,CAAC,CAAC;gBACrE,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBAC3B,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,8BAAI,GAAZ;QACC,IAAI,CAAC,EAAE,GAAG,mBAAO,EAAE,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;YAChC,IAAI,EAAE,EAAE,CAAC,YAAY,CAAC,qDAAqD,CAAC;YAC5E,GAAG,EAAE,EAAE,CAAC,YAAY,CAAC,6CAA6C,CAAC;SACnE,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,4BAAY,EAAE,CAAC;IACpC,CAAC;IACF,sBAAC;AAAD,CAAC;AA/CY,0CAAe;AAiD5B,kBAAe,eAAe,CAAC;;;;;;;;;;AC3D/B,gCAA+B;AAC/B,kDAAgD;AAChD,IAAI,QAAQ,GAAG,mBAAO,CAAC,CAAU,CAAC,CAAC;AACnC,IAAM,OAAO,GAAG,qBAAqB,CAAC;AACtC,IAAM,YAAY,GAAG,eAAa,4BAAO,CAAC,IAAI,SAAI,4BAAO,CAAC,GAAG,yCAAsC,CAAC;AACpG,IAAM,OAAO,GAAG,yBAAuB,OAAO,MAAG,CAAC;AAClD,IAAM,GAAG,GAAG;IACX,GAAG,EAAG,EAAE,CAAC,YAAY,CAAC,SAAS,GAAI,uCAAuC,CAAC;IAC3E,IAAI,EAAE,EAAE,CAAC,YAAY,CAAC,SAAS,GAAG,uCAAuC,CAAC;CAC1E,CAAC;AAEF;IACC,IAAM,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,YAAY,EAAE;QACzC,IAAI,EAAE;YACL,MAAM,EAAE,OAAO;SACf;QACD,cAAc,EAAE,IAAI;QACpB,IAAI,EAAE,4BAAO,CAAC,IAAI;QAClB,IAAI,EAAE,4BAAO,CAAC,GAAG;QACjB,GAAG,EAAE,IAAI;QACT,WAAW,EAAE,KAAK;QAClB,MAAM,EAAE,GAAG,CAAC,GAAG;QACf,OAAO,EAAE,GAAG,CAAC,IAAI;KACjB,CAAC,CAAC;IACH,QAAQ,CAAC,OAAO,GAAG,mBAAO,CAAC,CAAU,CAAC,CAAC;IACvC,EAAE,CAAC,EAAE,CAAC,OAAO,EAAC,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,GAAG,CAAC,EAApC,CAAoC,CAAC,CAAC;IAC7D,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,UAAC,GAAG;QACnB,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC7B,gDAAgD;QAChD,oCAAoC;QACpC,MAAM;IACP,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;AACnB,CAAC;AAtBD,0BAsBC;;;;;;;;ACjCD,qC;;;;;;ACAA,kC;;;;;;;;;ACAA,sCAAqC;AAErC,IAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAWlB,uBAAe,GAAG,IAAI,MAAM,CAAC;IACzC,EAAE,EAAE,MAAM;IACV,QAAQ,EAAE,MAAM;IAChB,QAAQ,EAAE,MAAM;IAChB,MAAM,EAAE,MAAM;IACd,KAAK,EAAE,MAAM;IACb,WAAW,EAAE,MAAM;CACnB,CAAC,CAAC;;;;;;;;;;ACpBH,sCAAqC;AAErC,IAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAYlB,yBAAiB,GAAG,IAAI,MAAM,CAAC;IAC3C,EAAE,EAAE,MAAM;IACV,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,MAAM;IACd,SAAS,EAAE,MAAM;IACjB,KAAK,EAAE,MAAM;IACb,OAAO,EAAE,MAAM;CACf,CAAC,CAAC;;;;;;;;;;ACrBH,sCAAqC;AAErC,IAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAUlB,qBAAa,GAAG,IAAI,MAAM,CAAC;IACvC,EAAE,EAAE,MAAM;IACV,SAAS,EAAE,MAAM;IACjB,cAAc,EAAE,MAAM;IACtB,OAAO,EAAE,MAAM;IACf,WAAW,EAAE,MAAM;CACnB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBH,6CAAuE;AACvE,6CAAqD;AAErD,IAAI,MAAM,GAAiB,4BAAY,EAAE,CAAC;AAC1C,IAAI,MAAM,GAAkB,IAAI,4BAAY,EAAE,CAAC;AAE/C,sBAA6B,MAAW;IAAxC,iBAgCC;IA/BG,MAAM,CAAC,EAAE,CACR,yBAAyB,EAC5B,cAAO,CAAC,CACP,CAAC;IAEH,MAAM,CAAC,EAAE,CACR,iBAAiB,EACjB,UAAO,SAAiB,EAAE,QAAa;;;;wBACzB,qBAAM,MAAM,CAAC,gBAAgB,EAAE;;oBAAtC,IAAI,GAAG,SAA+B;oBAC5C,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;oBACvC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACV,QAAQ,CAAC,EAAC,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,iBAAiB,EAAC,CAAC,CAAC;oBAC/D,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACP,QAAQ,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,6CAA6C,EAAC,CAAC;oBAC9E,CAAC;;;;SACD,CACD,CAAC;IAEF,MAAM,CAAC,EAAE,CACR,OAAO,EACP,UAAO,OAAY,EAAE,QAAiC;;;;wBAC1B,qBAAM,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAApF,aAAa,GAAQ,SAA+D;oBAC1F,QAAQ,CAAC,aAAa,CAAC,CAAC;;;;SACxB,CACD,CAAC;IAEF,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,UAAO,OAAuC,EAAE,QAAiC;;;;SAE9G,CAAC;AAGH,CAAC;AAhCD,oCAgCC;;;;;;;ACtCD,yC;;;;;;;;;ACAA,IAAM,QAAQ,GAAG,mBAAO,CAAC,CAAU,CAAC,CAAC;AACrC,IAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAElB,iBAAS,GAAG,IAAI,MAAM,CAAC;IACnC,QAAQ,EAAE;QACT,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,IAAI;QACZ,KAAK,EAAE,IAAI;KACX;IACD,QAAQ,EAAE,MAAM;IAChB,KAAK,EAAE,MAAM;CACb,CAAC,CAAC;;;;;;;ACXH,qC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,6CAAmD;AACnD,6CAAuD;AAEvD,oDAA4D;AAI5D,IAAM,MAAM,GAAG,IAAI,4BAAY,EAAE,CAAC;AAClC,IAAM,MAAM,GAAG,4BAAY,EAAE,CAAC;AAE9B,uBAA8B,MAAc;IAA5C,iBA2GC;IAzGA,MAAM,CAAC,EAAE,CAAC,oBAAoB,EAAE,UAAO,OAAY,EAAE,QAAa;;;;wBACxC,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;yBAC7E,KAAK,CAAC,aAAG;wBACT,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;wBAC1C,QAAQ,CAAC,GAAG,CAAC,CAAC;oBACf,CAAC,CAAC;;oBAJG,WAAW,GAAQ,SAItB;oBACH,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;wBACpB,QAAQ,CAAC;4BACR,EAAE,EAAE,IAAI;yBACR,CAAC;oBACH,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACP,QAAQ,CAAC;4BACR,EAAE,EAAE,KAAK;4BACT,OAAO,EAAE,gBAAgB;yBACzB,CAAC,CAAC;oBACJ,CAAC;;;;SACD,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,yBAAyB,EAAE,UAAO,OAAoE,EAAE,QAAiC;;;;wBAEzH,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAAzE,WAAW,GAAQ,SAAsD;yBAC3E,WAAW,CAAC,EAAE,EAAd,wBAAc;oBACE,qBAAM,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC;;oBAAtF,UAAU,GAAG,SAAyE;oBAC5F,QAAQ,CAAC,UAAU,CAAC,CAAC;;;oBAErB,QAAQ,CAAC;wBACR,EAAE,EAAE,KAAK;wBACT,OAAO,EAAE,yBAAyB;qBAClC,CAAC,CAAC;;;;;SAEJ,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,4BAA4B,EAAE,UAAO,OAAY,EAAE,QAAiC;;;;wBACpE,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAAzE,WAAW,GAAQ,SAAsD;yBAC3E,WAAW,CAAC,EAAE,EAAd,wBAAc;oBACE,qBAAM,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC;;oBAA3E,UAAU,GAAG,SAA8D;oBACjF,QAAQ,CAAC,UAAU,CAAC,CAAC;;;oBAErB,QAAQ,CAAC;wBACR,EAAE,EAAE,KAAK;wBACT,OAAO,EAAE,yBAAyB;qBAClC,CAAC,CAAC;;;;;SAEJ,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,UAAO,OAAY,EAAE,GAAqC;;;;;oBAC3F,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;oBACvB,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAApE,WAAW,GAAG,SAAsD;oBAC1E,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;yBAC5B,WAAW,CAAC,EAAE,EAAd,wBAAc;oBACA,qBAAM,iCAAW,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC;6BACzF,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,EAAlD,CAAkD,CAAC;;oBAD5D,QAAQ,GAAG,SACiD;oBAClE,GAAG,CAAC,QAAQ,CAAC,CAAC;;;oBAEd,GAAG,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qCAAqC,EAAC,CAAC,CAAC;;;;;SAElE,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,uBAAuB,EAAE,UAAO,OAAY,EAAE,QAA4B;;;;wBAC/D,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAApE,WAAW,GAAG,SAAsD;oBAC1E,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;wBACd,QAAQ,GAAG,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;wBACpD,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;4BACd,QAAQ,CAAC;gCACR,EAAE,EAAE,IAAI;gCACR,OAAO,EAAE;oCACR,QAAQ,eACJ,QAAQ,IACX,QAAQ,EAAE,OAAO,CAAC,EAAE,GACpB;iCACD;6BACD,CAAC,CAAC;wBACJ,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACP,QAAQ,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,iCAAiC,EAAC,CAAC;wBAClE,CAAC;oBACF,CAAC;;;;SACD,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,mBAAmB,EAAE,UAAO,OAAY,EAAE,QAAiC;;;;wBAChE,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAApE,WAAW,GAAG,SAAsD;yBACtE,WAAW,CAAC,EAAE,EAAd,wBAAc;oBACE,qBAAM,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC;;oBAAvE,UAAU,GAAG,SAA0D;oBAC7E,QAAQ,CAAC,UAAU,CAAC,CAAC;;;oBAErB,QAAQ,CAAC;wBACR,EAAE,EAAE,KAAK;wBACT,OAAO,EAAE,yBAAyB;qBAClC,CAAC,CAAC;;;;;SAEJ,CAAC,CAAC;IAEH,MAAM,CAAC,EAAE,CAAC,sBAAsB,EAAE,UAAO,OAAY,EAAE,QAAiC;;;;wBAClD,qBAAM,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,CAAC;;oBAArF,WAAW,GAAoB,SAAsD;yBACvF,WAAW,CAAC,EAAE,EAAd,wBAAc;oBACO,qBAAM,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,OAAO,CAAC;;oBAA5E,UAAU,GAAQ,SAA0D;oBAClF,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBACxB,QAAQ,CAAC,UAAU,CAAC,CAAC;;;oBAErB,QAAQ,CAAC;wBACR,EAAE,EAAE,KAAK;wBACT,OAAO,EAAE,yBAAyB;qBAClC,CAAC,CAAC;;;;;SAEJ,CAAC,CAAC;AAEJ,CAAC;AA3GD,sCA2GC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHD,2CAAiD;AACjD,+CAAqE;AACrE,6CAAqE;AACrE,gCAA+B;AAC/B,mCAA6B;AAG7B,qCAAkC;AAElC,qBAAkC,MAAc,EAAE,OAAe,EAAE,IAAS;;;;YAC3E,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;YACrC,sBAAO,IAAI,OAAO,CAAC,UAAO,OAAO,EAAE,MAAM;;;;;gCACpC,MAAM,GAAG,EAAE,CAAC;gCACV,KAAK,GAAiB,4BAAY,EAAE,CAAC;gCAC3C,GAAG,CAAC,OAA+B,EAAnB,SAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAnB,cAAmB,EAAnB,IAAmB;oCAA1B,GAAG;oCACX,MAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;iCAC3B;gCACK,IAAI,GAAc,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,OAAS,CAAC;gCAC9D,IAAI,GAAW,cAAc,CAAC,MAAM,CAAC,CAAC;gCACtC,OAAO,GAAM,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,OAAS,CAAC;gCAC5C,qBAClB,sBAAS,CACL,IAAI,YAAS,EACb,OAAO,SAAI,IAAM,EACpB,IAAI,CACJ;;gCALI,UAAU,GAAG,SAKjB;qCAEE,UAAU,CAAC,EAAE,EAAb,wBAAa;gCACE,qBAAM,kCAAiB,CACxC,OAAO,EACJ,UAAU,CAAC,IAAI,SAAI,UAAU,CAAC,QAAU,EACxC,OAAO,WAAQ,CAClB;;gCAJK,SAAS,GAAG,SAIjB;gCACkB,qBAAM,iCAAgB,CACxC,OAAO,EACJ,UAAU,CAAC,IAAI,SAAI,UAAU,CAAC,QAAU,EACxC,OAAO,UAAO,CACjB;;gCAJK,UAAU,GAAG,SAIlB;gCACD,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,UAAU,CAAC,CAAC;gCAC7B,qBACvB,EAAE,CAAC,QAAQ,CACV,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,EACxB,gBAAgB,EAChB,OAAO,EACP,KAAK,EACF,OAAO,SAAM,CAChB,CAAC;;gCAPE,OAAO,GAAW,SAOpB;gCACE,QAAQ,GAAG,MAAM;qCACrB,UAAU,CAAC,QAAQ,CAAC;qCACpB,MAAM,CAAC,IAAI,CAAC,CAAC;gCACT,OAAO,GAAG,MAAM;qCACpB,UAAU,CAAC,QAAQ,CAAC;qCACpB,MAAM,CAAC,OAAO,CAAC,CAAC;gCACS,qBAAM,KAAK,CAAC,iBAAiB,CACtD,OAAO,EACP;wCACC,UAAU,EAAE,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;wCAClC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;qCAC9B,CAAC;;gCALE,GAAG,GAAkB,SAKvB;gCACJ,EAAE,EAAC,OAAO,IAAI,QAAQ,CAAC,EAAC;oCACvB,OAAO,CAAC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAC,IAAI,EAAE,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,GAAG,EAAC,EAAC,CAAC,CAAC;gCAClE,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACP,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,mBAAmB,EAAC,CAAC,CAAC;gCAEnD,CAAC;;;gCAED,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,UAAiB,EAAC,CAAC,CAAC;;;;;qBAEjD,CAAC,EAAC;;;CACH;AA5DD,kCA4DC;AAED,wBAAwB,MAAc;IACrC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,KAAI,QAAQ;YACX,MAAM,CAAC,KAAK,CAAC;QACd,KAAI,QAAQ;YACX,MAAM,CAAC,KAAK,CAAC;QACd,KAAI,QAAQ;YACX,MAAM,CAAC,KAAK,CAAC;QACd,KAAI,QAAQ;YACX,MAAM,CAAC,MAAM,CAAC;QACf,KAAI,QAAQ;YACX,MAAM,CAAC,KAAK,CAAC;QACd;YACC,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;AACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtFD,gCAA+B;AAS/B,mBAAgC,IAAY,EAAE,QAAgB,EAAE,IAAS;;;;;wBACjE,qBAAM,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC;yBAC7B,IAAI,CAAE;;;wCACC,qBAAM,EAAE,CAAC,SAAS,CAAI,IAAI,SAAI,QAAU,EAAE,IAAI,CAAC;yCACpD,IAAI,CAAC,UAAC,MAAW;wCACjB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;4CACZ,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,kBAAkB,EAAC,CAAC;wCACjD,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACP,MAAM,CAAC,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAG,IAAM,EAAE,QAAQ,EAAC,KAAG,QAAU,EAAC,CAAC;wCAC5D,CAAC;oCACF,CAAC,CACD;wCARD,sBAAO,SAQN,EAAC;;;yBACF,CAAC;yBACD,KAAK,CAAC,aAAG;wBACT,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,oBAAoB,GAAG,GAAG,EAAC,CAAC;oBAC1D,CAAC,CAAC;wBAdF,sBAAO,SAcL,EAAC;;;;CACH;AAhBD,8BAgBC;AAED,kBAA+B,QAAgB;;;;wBACvC,qBAAM,EAAE,CAAC,QAAQ,CACpB,OAAO,CAAC,GAAG,CAAC,GAAG,wBAAmB,QAAQ,aAAQ,QAAQ,SAAM,CACnE;wBAFD,sBAAO,SAEN,EAAC;;;;CACF;AAJD,4BAIC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BD,gCAA+B;AAExB,yCAAK,CAA6B;AAEzC,2BAAwC,QAAgB,EAAE,QAAgB,EAAE,UAAkB;;;;wBACtF,qBAAM,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC;yBACnC,IAAI,CAAC;wBACL,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,KAAG,QAAU,EAAE,MAAM,EAAE,MAAM,EAAE,KAAG,UAAU,GAAG,QAAQ,UAAO,EAAE,IAAI,CAAC,CAAC,CAAC;wBAC3G,4CAA4C;wBAC5C,yCAAyC;wBACzC,MAAM;wBACN,4CAA4C;wBAC5C,iCAAiC;wBACjC,MAAM;wBAEN,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAY;4BAC9B,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,IAAI,CAAC,CAAC;wBACtD,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,IAAI,CAAC;oBACb,CAAC,CAAC;yBACD,KAAK,CAAC,aAAG;wBACT,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;wBACnD,MAAM,CAAC,KAAK,CAAC;oBAEd,CAAC,CAAC;wBAnBH,sBAAO,SAmBJ,EAAC;;;;CACJ;AArBD,8CAqBC;AAED,0BAAuC,QAAgB,EAAE,QAAgB,EAAE,UAAkB;;;YAC5F,sBAAO,IAAI,OAAO,CAAU,CAAC,UAAC,OAAO,EAAE,MAAM;oBAC5C,EAAE,CAAC,SAAS,CAAC,UAAU,CAAC;yBACtB,IAAI,CAAC;wBACL,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,KAAG,QAAU,EAAE,UAAU,EAAE,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,KAAG,UAAU,GAAG,QAAQ,SAAM,EAAE,IAAI,CAAC,CAAC,CAAC;wBACpI,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAY;4BAC9B,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC,CAAC;4BACpD,EAAE,EAAC,CAAC,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gCACzB,OAAO,CAAC,IAAI,CAAC;4BACd,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACP,MAAM,CAAC,KAAK,CAAC,CAAC;4BACf,CAAC;wBACF,CAAC,CAAC,CAAC;oBACJ,CAAC,CAAC;yBACD,KAAK,CAAC,aAAG;wBACT,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;wBACnD,MAAM,CAAC,KAAK,CAAC,CAAC;oBACf,CAAC,CAAC,CAAC;gBACJ,CAAC,CAAC,CAAC;;;CACJ;AAnBD,4CAmBC;;;;;;;AC9CD,0C;;;;;;ACAA,iC;;;;;;ACAA,mC;;;;;;ACAA,sC","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 63c3f448c81f5218d905","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 1\n// module chunks = 0","import mongoose = require('mongoose');\nimport {SoundMetaModel, SoundMetaSchema} from '../odm/models/sound-info.model';\nimport {uploadSound} from '../services/transcoding.service';\nimport {StatisticsModel, STATISTICS_SCHEMA} from '../odm/models/statistics.model';\nimport {MetricsModel, MetricsSchema} from '../odm/models/metrics.model';\nimport {StoreResponse} from '../../dcomp.type';\n\nconst METRICS = mongoose.model('Metrics', MetricsSchema);\nconst STATS = mongoose.model('Statistics', STATISTICS_SCHEMA);\nconst SOUND_META = mongoose.model('SoundMeta', SoundMetaSchema);\n\nexport interface StoreManager {\n\n\t// getMetrics: (soundId: string) => Promise<StoreResponse>;\n\n\tsetMetrics: (soundId: string, metric: {}) => Promise<number | StoreResponse>;\n\n\tcreateNewMetrics: (metrics: MetricsModel) => Promise<StoreResponse>;\n\n\tgetSoundStats(soundId: string): Promise<StoreResponse>;\n\n\tsetSoundStats(soundId: string, stat: {}): Promise<number | StoreResponse> ;\n\n\tcreateNewStats(stats: StatisticsModel): Promise<StoreResponse>;\n\n\tgetSoundMeta(condition: {[key: string]: any}): Promise<StoreResponse>;\n\n\tgetAllSoundsMeta(): Promise<StoreResponse>;\n\n\tregisterNewSound(formData: SoundMetaModel, userID: string): Promise<StoreResponse | {}>;\n\n\tupdateSoundByProp(id: string, prop: {[prop:string]: any}): Promise<StoreResponse>;\n\n\tdeleteSoundById(id: string): Promise<StoreResponse>;\n\n}\n\nexport function storeManager(): StoreManager {\n\n\treturn {\n\t\t// getMetrics: async (soundId: string): Promise<StoreResponse> => {\n\t\t// \tconst mResponse  = await METRICS.find({sound_id: soundId})\n\t\t// \t\t.catch((err: string) => console.log('Error: GettingMetrics', err));\n\t\t// \t\treturn {ok: true, payload: mResponse}\n\t\t// },\n\t\tasync setMetrics(soundId: string, metric: {}): Promise<number | StoreResponse> {\n\t\t\tconst mResponse = await METRICS\n\t\t\t\t.findById(soundId)\n\t\t\t\t.update({...metric, soundId: soundId})\n\t\t\t\t.catch(err => console.log('Error: Setting Metrics', err));\n\t\t\tif (mResponse){\n\t\t\t\treturn {ok: true, payload: mResponse}\n\t\t\t} else {\n\t\t\t\treturn {ok: false, message: 'Error: No Metrics Found'};\n\t\t\t}\n\t\t},\n\t\tasync createNewMetrics(metrics: MetricsModel): Promise<StoreResponse> {\n\t\t\tconst mResponse =  await METRICS.create(metrics)\n\t\t\t\t.catch(err => console.log('Error: Getting Metrics', err));\n\t\t\tif (mResponse){\n\t\t\t\treturn {ok: true, payload: mResponse}\n\t\t\t} else {\n\t\t\t\treturn {ok: false, message: 'Error: No Metrics Found'};\n\t\t\t}\n\t\t},\n\t\tasync getSoundStats(soundId: string): Promise<StoreResponse> {\n\t\t\treturn await STATS\n\t\t\t\t.findById(soundId)\n\t\t\t\t.catch(err => console.log('Error: Getting STATS', err));\n\t\t},\n\t\tasync setSoundStats(soundId: string, stat: StatisticsModel): Promise<number | StoreResponse> {\n\t\t\treturn await STATS\n\t\t\t\t.findById(soundId)\n\t\t\t\t.update({...stat, sound_id: soundId})\n\t\t\t\t.catch(err => console.log('Error: Setting STATS', err));\n\n\t\t},\n\t\tasync createNewStats(stats: StatisticsModel): Promise<StoreResponse>{\n\t\t\treturn await STATS.create(stats)\n\t\t\t\t.catch(err => console.log('Error: Getting STATS', err));\n\t\t},\n\n\t\tasync getSoundMeta(props: {[prop: string]: SoundMetaModel}): Promise<StoreResponse> {\n\t\t\treturn SOUND_META.find(props)\n\t\t\t\t.catch(err => console.log('Error: Getting STATS', err));\n\t\t},\n\t\tasync getAllSoundsMeta(): Promise<StoreResponse>{\n\t\t\treturn await SOUND_META.find()\n\t\t\t\t.catch(err => console.log('Error: Getting STATS', err));\n\t\t},\n\t\tasync registerNewSound(formData: SoundMetaModel | any, userID): Promise<StoreResponse | {}> {\n\t\t\tconst registered = await SOUND_META.create({...formData, user_id: userID});\n\t\t\tif (registered){\n\t\t\t\treturn {ok: true, payload: registered}\n\t\t\t} else {\n\t\t\t\t// console.log('error registering sound', registered);\n\t\t\t\treturn {ok: false, message: registered};\n\t\t\t}\n\t\t},\n\t\tasync updateSoundByProp(id: string, prop: {[prop:string]: any}): Promise<StoreResponse> {\n\t\t\tconsole.log('update', id, prop);\n\t\t\tconst soundDoc: any = await SOUND_META.findById(id)\n\t\t\t\t.catch((err: any) => console.log('sound', err));\n\t\t\tif(soundDoc){\n\t\t\t\treturn soundDoc.update(prop)\n\t\t\t\t\t.catch((err: any) => console.log('update' ,err));\n\t\t\t} else {\n\t\t\t\treturn {ok: false, message: 'Error: No Matching Sound ID'};\n\t\t\t}\n\t\t},\n\t\tasync deleteSoundById(id: string): Promise<StoreResponse> {\n\t\t\tconsole.log('deleting sound', id);\n\t\t\tconst response = await SOUND_META.remove({_id: id});\n\t\t\tconsole.log('deleted sound?', response);\n\t\t\treturn response;\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/managers/store.manager.ts","export const SECRET = '1324trgjnfk.szfjaw3r9fbio2a3br23rw,eamf dsczpoh23RN.KNWedfscopjin23rWEAFSD0-9JIO2N3RWEFDS';\n\nexport const TWITTER = {\n\tAPIkey: 'ctDlQT5AXPKRCdVT1j8p8Y6fM',\n\tsecret: 'McEec0arxfxNiKzz6C2GfVahoIuJOXZM5ioMPOkAqWzbBDto3w'\n};\n\nexport const DB_UNPW = {\n\tuser: 'dcompAdmin',\n\tpwd: 'itAdminME2!'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/_local.credentials.ts","import * as JSONWebToken from 'jsonwebtoken';\nimport mongoose = require('mongoose');\nimport { UserModel } from '../odm/models/user.model';\nimport { RSocketResponse } from '../models/response-socket.model';\nimport {SECRET} from '../_local.credentials';\nconst bcrypt = require('bcryptjs');\n\nexport class LoginManager {\n\n\tprivate User = mongoose.model('User', UserModel);\n\n\tpublic async CreateUser(): Promise<any> {\n\t\tawait this.User.create({\n\t\t\tuserName: 'ADMIN-NOCEBO',\n\t\t\tpassword: this.hashPassword('dementedGrapefruit00')\n\t\t}).catch(err => console.log('error create user', err));\n\t}\n\n\tprivate hashPassword(password: string): string {\n\t\treturn bcrypt.hashSync(password, 8);\n\t}\n\n\tprivate async validatePassword(password: string, userName: string): Promise<boolean> {\n\t\tconst user: any = await this.User.findOne({userName: userName});\n\t\tif (user) {\n\t\t\treturn bcrypt.compareSync(password, user.password);\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate returnSessionToken(\n\t\tbody: {\n\t\t\tsessionId: string,\n\t\t\tuserName: string,\n\t\t\tuid: string\n\t\t}\n\t): string {\n\t\treturn JSONWebToken.sign({\n\t\t\tsessionId: body.sessionId,\n\t\t\tuser: body.userName,\n\t\t\tuid: body.uid\n\t\t}, SECRET);\n\t}\n\n\tpublic async signInUser(credentials: {userName: string, pwd: string }, sessionId: string): Promise<RSocketResponse> {\n\t\tconst isValid = await this.validatePassword(credentials.pwd, credentials.userName);\n\t\tif (isValid) {\n\t\t\tconst user: any = await this.User.findOne({userName: credentials.userName});\n\t\t\tif(user){\n\t\t\t\treturn {\n\t\t\t\t\tok: true, payload: {\n\t\t\t\t\t\tjwt: this.returnSessionToken({\n\t\t\t\t\t\t\tsessionId: sessionId,\n\t\t\t\t\t\t\tuserName: user.userName,\n\t\t\t\t\t\t\tuid: user._id\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {ok: false, message: 'User not found.'}\n\t\t\t}\n\t\t} else {\n\t\t\treturn {ok: false, message: 'Credentials did not match.'};\n\t\t}\n\t}\n\n\tpublic async jwtVerify(jwt: string, sessionId: string): Promise<RSocketResponse> {\n\t\tconst jwtVerify = new Promise((resolve, reject): void => {\n\t\t\tJSONWebToken.verify(\n\t\t\t\tjwt,\n\t\t\t\tSECRET,\n\t\t\t\t(error: any, decoded: any) => {\n\t\t\t\t\tif (error || (decoded.sessionId !== sessionId)) {\n\t\t\t\t\t\treject({\n\t\t\t\t\t\t\tok: false,\n\t\t\t\t\t\t\tmessage: 'JWT was invalid' + error\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('JWT ok');\n\t\t\t\t\tresolve ({ok: true, payload: decoded});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t\treturn await jwtVerify as RSocketResponse;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/auth/login.manager.ts","import BootStrap from './backend';\n\nfunction boot() {\n\tBootStrap.bootstrap();\n}\n\nboot();\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {dbStart} from './odm/db.config';\ndeclare type SocketIOEndPoints = any;\nimport * as https from 'https';\nimport * as fs from 'fs-extra';\nimport Socket = SocketIO.Socket;\nimport { StoreManager, storeManager } from './managers/store.manager';\nimport { publicEvents } from './events/public.events';\nimport { privateEvents } from './events/private.events';\n\n\nexport class BackendServices {\n\tprivate db;\n\tprivate server: https.Server;\n\tprivate port = 2820;\n\tprivate socket: SocketIO.Server = require('socket.io')(2820, {\n\t\tsecure: true,\n\t\ttransports: ['websocket'],\n\t});\n\t\t// .origins('http://localhost:3000');\n\tprivate clients: string[] = [];\n\tprivate storeManager: StoreManager;\n\tprivate publicEvents: SocketIOEndPoints;\n\tprivate privateEvents: SocketIOEndPoints;\n\n\tpublic static bootstrap(): BackendServices {\n\t\treturn new BackendServices();\n\t};\n\n\tconstructor() {\n\t\tthis.init();\n\t\tthis.setupWS();\n\t};\n\n\tprivate setupWS(): void {\n\t\tthis.socket.on('connect', (socket: Socket) => {\n\t\t\tconsole.log('client connected', socket.id);\n\t\t\tthis.publicEvents = publicEvents(socket);\n\t\t\tthis.privateEvents = privateEvents(socket);\n\t\t\tthis.clients = [...this.clients, socket.id];\n\n\t\t\tsocket.on('disconnecting', (res: any) => {\n\t\t\t\tconst index = this.clients.findIndex((value) => value === socket.id);\n\t\t\t\tconsole.log(`Client DC'd`);\n\t\t\t\tthis.clients.splice(index, 1);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate init(): void {\n\t\tthis.db = dbStart();\n\t\tthis.server = https.createServer({\n\t\t\tcert: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/certificate.pem'),\n\t\t\tkey: fs.readFileSync('/Users/raven/dev0/dcomp-backend/src/key.pem')\n\t\t});\n\t\tthis.server.listen(this.port, 'localhost');\n\t\tthis.storeManager = storeManager();\n\t}\n}\n\nexport default BackendServices;\n\n\n\n// WEBPACK FOOTER //\n// ./src/backend.ts","import * as fs from \"fs-extra\";\nimport { DB_UNPW } from '../_local.credentials';\nlet mongoose = require('mongoose');\nconst DB_Name = 'dcomp-content-store';\nconst DB_PATH_USER = `mongodb://${DB_UNPW.user}:${DB_UNPW.pwd}@127.0.0.1:27017/dcomp-content-store`;\nconst DB_PATH = `mongodb://127.0.0.1/${DB_Name}/`;\nconst SSL = {\n\tkey:  fs.readFileSync(__dirname +  '/../../_local/secops/mongodb-cert.key'),\n\tcert: fs.readFileSync(__dirname + '/../../_local/secops/mongodb-cert.crt')\n};\n\nexport function dbStart() {\n\tconst db = mongoose.connect(DB_PATH_USER, {\n\t\tauth: {\n\t\t\tauthdb: 'admin'\n\t\t},\n\t\tuseMongoClient: true,\n\t\tuser: DB_UNPW.user,\n\t\tpass: DB_UNPW.pwd,\n\t\tssl: true,\n\t\tsslValidate: false,\n\t\tsslKey: SSL.key,\n\t\tsslCert: SSL.cert\n\t});\n\tmongoose.Promise = require('bluebird');\n\tdb.on('error',(evt) => console.log('connection error', evt));\n\tdb.once('open', (evt) => {\n\t\tconsole.log('Db Connected!');\n\t\t// new LoginManager().CreateUser().then(res => {\n\t\t// \tconsole.log('create user', res);\n\t\t// });\n\t});\n\tdb.useDb(DB_Name);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/db.config.ts","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 10\n// module chunks = 0","import * as mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nexport interface SoundMetaModel {\n\tid?: string;\n\tsoundURL?: string;\n\tvideoURL?: string;\n\timgURL?: string;\n\ttitle?: string;\n\tdescription: string;\n}\n\nexport const SoundMetaSchema = new Schema({\n\tid: String,\n\tsoundURL: String,\n\tvideoURL: String,\n\timgURL: String,\n\ttitle: String,\n\tdescription: String\n});\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/sound-info.model.ts","import * as mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nexport interface StatisticsModel {\n\tid?: string;\n\tsound_id: string;\n\tlikes: number;\n\tshares: number;\n\tdownloads: number;\n\tviews: number;\n\tupdates: string;\n}\n\nexport const STATISTICS_SCHEMA = new Schema({\n\tid: String,\n\tlikes: Number,\n\tshares: Number,\n\tdownloads: Number,\n\tviews: Number,\n\tupdates: String,\n});\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/statistics.model.ts","import * as mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nexport interface MetricsModel {\n\tid?: string;\n\tsessionId: string;\n\tcontent_viewed: string;\n\tupdates: string;\n\tstateChains: string;\n}\n\nexport const MetricsSchema = new Schema({\n\tid: String,\n\tsessionId: String,\n\tcontent_viewed: String,\n\tupdates: Number,\n\tstateChains: String\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/metrics.model.ts","import { StoreManager, storeManager } from '../managers/store.manager';\nimport { LoginManager } from '../auth/login.manager';\n\nvar storeM: StoreManager = storeManager();\nvar loginM: LoginManager =  new LoginManager();\n\nexport function publicEvents(socket: any) {\n    socket.on(\n    \t'0AUTH2_TWITTER::GET_URL',\n\t\t() => {}\n\t\t);\n\n\tsocket.on(\n\t\t'GET_SOUNDS_META',\n\t\tasync (sessionId: string, callback: any) => {\n\t\t\tconst info = await storeM.getAllSoundsMeta();\n\t\t\tconsole.log('details requested', info);\n\t\t\tif (info) {\n\t\t\t\tcallback({payload: info, ok: true, event: 'GET_SOUNDS_META'});\n\t\t\t} else {\n\t\t\t\tcallback({ok: false, message: 'Error: Could not retrieve sounds meta data.'})\n\t\t\t}\n\t\t}\n\t);\n\n\tsocket.on(\n\t\t'LOGIN',\n\t\tasync (payload: any, callback: (response: any) => void) => {\n\t\t\tconst loginResponse: any = await loginM.signInUser(payload.credentials, payload.sessionId);\n\t\t\tcallback(loginResponse);\n\t\t}\n\t);\n\n\tsocket.on('GET_CONTENT_PACK', async (payload: {[componentName: string]: any}, callback: (response: any) => void) => {\n\t\t// callback({ok: true, data: data});\n\t})\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/events/public.events.ts","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 15\n// module chunks = 0","const mongoose = require('mongoose');\nconst Schema = mongoose.Schema;\n\nexport const UserModel = new Schema({\n\tuserName: {\n\t\ttype: String,\n\t\tunique: true,\n\t\tindex: true,\n\t},\n\tpassword: String,\n\temail: String,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/odm/models/user.model.ts","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 17\n// module chunks = 0","import {LoginManager} from '../auth/login.manager';\nimport {storeManager} from '../managers/store.manager';\nimport {SoundMetaModel} from '../odm/models/sound-info.model';\nimport {uploadSound} from '../services/transcoding.service';\nimport Socket = SocketIO.Socket;\nimport {RSocketResponse} from '../models/response-socket.model';\n\nconst loginM = new LoginManager();\nconst storeM = storeManager();\n\nexport function privateEvents(socket: Socket) {\n\n\tsocket.on('PRIVATE::AUTHORIZE', async (payload: any, callback: any) => {\n\t\tconst jwtResponse: any = await loginM.jwtVerify(payload.jwt, payload.sessionId)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('Error: JWT Validation', err);\n\t\t\t\tcallback(err);\n\t\t\t});\n\t\tif (jwtResponse.ok) {\n\t\t\tcallback({\n\t\t\t\tok: true\n\t\t\t})\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'Not Authorized'\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::NEW_SOUND_META', async (payload: {jwt: string, sessionId: string, soundMeta: SoundMetaModel}, callback: (response: any) => void) => {\n\t\t// console.log('new sound Meta', payload);\n\t\tconst jwtResponse: any = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse = await storeM.registerNewSound(payload.soundMeta, jwtResponse.payload.uid);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::UPDATE_SOUND_META', async (payload: any, callback: (response: any) => void) => {\n\t\tconst jwtResponse: any = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse = await storeM.updateSoundByProp(payload.sound_id, payload.prop);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::FILE_UPLOAD', async (payload: any, ack: (responseTransport: any) => void) => {\n\t\tconsole.log('File upload called', payload);\n\t\tconst jwtResponse = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tconsole.log('jwt', jwtResponse);\n\t\tif (jwtResponse.ok){\n\t\t\tconst response = await uploadSound(jwtResponse.payload.uid, payload.sound_id, payload.data)\n\t\t\t\t.catch(err => console.log('Error: Saving sound to system.', err));\n\t\t\tack(response);\n\t\t} else {\n\t\t\tack({ok: false, message: 'JWT not valid. Please log in again.'});\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::DELETE_SOUND', async (payload: any, callback: (response) => void) => {\n\t\tconst jwtResponse = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst response = storeM.deleteSoundById(payload.id);\n\t\t\tif (response) {\n\t\t\t\tcallback({\n\t\t\t\t\tok: true,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tresponse: {\n\t\t\t\t\t\t\t...response,\n\t\t\t\t\t\t\tsound_id: payload.id\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({ok: false, message: 'Error: Remove operation failed.'})\n\t\t\t}\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::SET_STAT', async (payload: any, callback: (response: any) => void) => {\n\t\tconst jwtResponse = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse = await storeM.setSoundStats(payload.sound_id, payload.stat);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n\tsocket.on('PRIVATE::SET_METRICS', async (payload: any, callback: (response: any) => void) => {\n\t\tconst jwtResponse: RSocketResponse = await loginM.jwtVerify(payload.jwt, payload.sessionId);\n\t\tif (jwtResponse.ok) {\n\t\t\tconst rSResponse: any = await storeM.setMetrics(payload.sound_id, payload.metrics);\n\t\t\tconsole.log(rSResponse);\n\t\t\tcallback(rSResponse);\n\t\t} else {\n\t\t\tcallback({\n\t\t\t\tok: false,\n\t\t\t\tmessage: 'JsonWebToken not valid.',\n\t\t\t});\n\t\t}\n\t});\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/events/private.events.ts","import {saveToDir} from '../managers/fs.manager';\nimport {encodeAudioToFLAC, encodeAudioToMP3} from './ffmpeg.service';\nimport {storeManager, StoreManager} from '../managers/store.manager';\nimport * as fs from 'fs-extra';\nimport * as Path from 'path';\nimport {RSocketResponse} from '../models/response-socket.model';\nimport {StoreResponse} from '../../dcomp.type';\nimport crypto = require('crypto');\n\nexport async function uploadSound(userID: string, soundID: string, file: any): Promise<RSocketResponse | {} > {\n\tconsole.log('user ID', userID, file);\n\treturn new Promise(async (resolve, reject) => {\n\t\tlet header = '';\n\t\tconst store: StoreManager = storeManager();\n\t\tfor (let bit of file.subarray(0, 4)) {\n\t\t\theader += bit.toString(16);\n\t\t}\n\t\tconst path: string = `${process.env.PWD}/dcm-file-store/${soundID}`;\n\t\tconst MIME: string = HEADER_TO_MIME(header);\n\t\tconst outPath = `${process.env.PWD}/dcm-file-store/${soundID}`;\n\t\tconst saveResult = await\n\t\t\tsaveToDir(\n\t\t\t\t`${path}/source`,\n\t\t\t\t`${soundID}.${MIME}`,\n\t\t\t\tfile\n\t\t\t);\n\n\t\tif (saveResult.ok) {\n\t\t\tconst flacSaved = await encodeAudioToFLAC(\n\t\t\t\tsoundID,\n\t\t\t\t`${saveResult.path}/${saveResult.fileName}`,\n\t\t\t\t`${outPath}/flac/`\n\t\t\t);\n\t\t\tconst mp3Encoded = await encodeAudioToMP3(\n\t\t\t\tsoundID,\n\t\t\t\t`${saveResult.path}/${saveResult.fileName}`,\n\t\t\t\t`${outPath}/mp3/`\n\t\t\t);\n\t\t\tconsole.log('hit uploadSound after mp3', mp3Encoded);\n\t\t\tconst mp3File: Buffer = await\n\t\t\t\tfs.readFile(\n\t\t\t\t\tPath.join(process.env.PWD,\n\t\t\t\t\t\t'dcm-file-store',\n\t\t\t\t\t\tsoundID,\n\t\t\t\t\t\t`mp3`,\n\t\t\t\t\t\t`${soundID}.mp3`\n\t\t\t\t\t));\n\t\t\tconst fileHash = crypto\n\t\t\t\t.createHash('sha256')\n\t\t\t\t.update(file);\n\t\t\tconst mp3Hash = crypto\n\t\t\t\t.createHash('sha256')\n\t\t\t\t.update(mp3File);\n\t\t\tconst doc: StoreResponse = await store.updateSoundByProp(\n\t\t\t\t\tsoundID,\n\t\t\t\t\t{\n\t\t\t\t\t\tsourceHash: fileHash.digest('hex'),\n\t\t\t\t\t\tmp3Hash: mp3Hash.digest('hex')\n\t\t\t\t\t});\n\t\t\tif(mp3Hash && fileHash){\n\t\t\t\tresolve({ok: true, body: {path: saveResult.path, details: doc}});\n\t\t\t} else {\n\t\t\t\treject({ok: false, message: 'Error transcoding'});\n\n\t\t\t}\n\t\t} else {\n\t\t\treject({ok: false, message: saveResult as any});\n\t\t}\n\t});\n}\n\nfunction HEADER_TO_MIME(header: string): string {\n\tswitch (header.slice(0, 6)) {\n\t\tcase'464f52':\n\t\t\treturn 'aif';\n\t\tcase'494433':\n\t\t\treturn 'mp3';\n\t\tcase'524946':\n\t\t\treturn 'wav';\n\t\tcase'664C61':\n\t\t\treturn 'flac';\n\t\tcase'000001':\n\t\t\treturn 'mp4';\n\t\tdefault:\n\t\t\treturn 'unknown';\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/transcoding.service.ts","import * as fs from 'fs-extra';\n\nexport interface SaveDIRResponse {\n\tok?: boolean;\n\tpath?: string;\n\tfileName?: string;\n\tmessage?: string;\n}\n\nexport async function saveToDir(path: string, fileName: string, file: any): Promise<SaveDIRResponse> {\n\treturn await fs.ensureDir(path)\n\t\t.then( async () => {\n\t\t\treturn await fs.writeFile(`${path}/${fileName}`, file)\n\t\t\t\t.then((reason: any ) => {\n\t\t\t\t\tif (reason) {\n\t\t\t\t\t\treturn {ok: false, message: 'file write error'};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {ok: true, path: `${path}`, fileName:`${fileName}`};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t\t.catch(err => {\n\t\t\treturn {ok: false, message: 'ensure DIR error: ' + err};\n\t});\n}\n\nexport async function openFile(sound_id: string): Promise<Buffer> {\n\treturn await fs.readFile(\n\t\t`${process.env.PWD}/dcm-file-store/${sound_id}/mp3/${sound_id}.mp3`\n\t);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/managers/fs.manager.ts","import * as fs from 'fs-extra';\n\nconst {spawn} = require('child_process');\n\nexport async function encodeAudioToFLAC(fileName: string, filePath: string, outputPath: string): Promise<boolean> {\n\treturn await fs.ensureDir(outputPath)\n\t\t.then(() => {\n\t\t\tlet ffmpeg = spawn(`ffmpeg`, [`-i`, `${filePath}`, `-c:a`, `flac`, `${outputPath}${fileName}.flac`, `-y`]);\n\t\t\t// ffmpeg.stdout.on('data', (data: any) => {\n\t\t\t// \tconsole.log('flac', data.toString());\n\t\t\t// });\n\t\t\t// ffmpeg.stderr.on('data', (data: any) => {\n\t\t\t// \tconsole.log(data.toString());\n\t\t\t// });\n\n\t\t\tffmpeg.on('exit', (code: string) => {\n\t\t\t\tconsole.log('ffmpeg::flac exited with code: ', code);\n\t\t\t});\n\t\t\treturn true;\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log('error creating DIR for ffmpeg.', err);\n\t\t\treturn false;\n\n\t\t});\n}\n\nexport async function encodeAudioToMP3(fileName: string, filePath: string, outputPath: string): Promise<boolean> {\n\treturn new Promise<boolean>(((resolve, reject) => {\n\t\tfs.ensureDir(outputPath)\n\t\t\t.then(() => {\n\t\t\t\tlet ffmpeg = spawn(`ffmpeg`, [`-i`, `${filePath}`, `-codec:a`, `libmp3lame`, `-b:a`, `320k`, `${outputPath}${fileName}.mp3`, `-y`]);\n\t\t\t\tffmpeg.on('exit', (code: string) => {\n\t\t\t\t\tconsole.log('ffmpeg::mp3 exited with code: ', code);\n\t\t\t\t\tif(0 === parseInt(code)) {\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error creating DIR for ffmpeg.', err);\n\t\t\t\treject(false);\n\t\t\t});\n\t\t}))\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/ffmpeg.service.ts","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 25\n// module chunks = 0"],"sourceRoot":""}